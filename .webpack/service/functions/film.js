(function(e, a) { for(var i in a) e[i] = a[i]; }(exports, /******/ (function(modules) { // webpackBootstrap
/******/ 	// The module cache
/******/ 	var installedModules = {};
/******/
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/
/******/ 		// Check if module is in cache
/******/ 		if(installedModules[moduleId]) {
/******/ 			return installedModules[moduleId].exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = installedModules[moduleId] = {
/******/ 			i: moduleId,
/******/ 			l: false,
/******/ 			exports: {}
/******/ 		};
/******/
/******/ 		// Execute the module function
/******/ 		modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);
/******/
/******/ 		// Flag the module as loaded
/******/ 		module.l = true;
/******/
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/
/******/
/******/ 	// expose the modules object (__webpack_modules__)
/******/ 	__webpack_require__.m = modules;
/******/
/******/ 	// expose the module cache
/******/ 	__webpack_require__.c = installedModules;
/******/
/******/ 	// define getter function for harmony exports
/******/ 	__webpack_require__.d = function(exports, name, getter) {
/******/ 		if(!__webpack_require__.o(exports, name)) {
/******/ 			Object.defineProperty(exports, name, {
/******/ 				configurable: false,
/******/ 				enumerable: true,
/******/ 				get: getter
/******/ 			});
/******/ 		}
/******/ 	};
/******/
/******/ 	// getDefaultExport function for compatibility with non-harmony modules
/******/ 	__webpack_require__.n = function(module) {
/******/ 		var getter = module && module.__esModule ?
/******/ 			function getDefault() { return module['default']; } :
/******/ 			function getModuleExports() { return module; };
/******/ 		__webpack_require__.d(getter, 'a', getter);
/******/ 		return getter;
/******/ 	};
/******/
/******/ 	// Object.prototype.hasOwnProperty.call
/******/ 	__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };
/******/
/******/ 	// __webpack_public_path__
/******/ 	__webpack_require__.p = "";
/******/
/******/ 	// Load entry module and return exports
/******/ 	return __webpack_require__(__webpack_require__.s = 6);
/******/ })
/************************************************************************/
/******/ ([
/* 0 */
/***/ (function(module, exports) {

module.exports = require("babel-runtime/helpers/objectWithoutProperties");

/***/ }),
/* 1 */
/***/ (function(module, exports) {

module.exports = require("babel-runtime/helpers/extends");

/***/ }),
/* 2 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
Object.defineProperty(exports,"__esModule",{value:true});function _extendableBuiltin3(cls){function ExtendableBuiltin(){cls.apply(this,arguments);}ExtendableBuiltin.prototype=Object.create(cls.prototype,{constructor:{value:cls,enumerable:false,writable:true,configurable:true}});if(Object.setPrototypeOf){Object.setPrototypeOf(ExtendableBuiltin,cls);}else{ExtendableBuiltin.__proto__=cls;}return ExtendableBuiltin;}function _extendableBuiltin2(cls){function ExtendableBuiltin(){cls.apply(this,arguments);}ExtendableBuiltin.prototype=Object.create(cls.prototype,{constructor:{value:cls,enumerable:false,writable:true,configurable:true}});if(Object.setPrototypeOf){Object.setPrototypeOf(ExtendableBuiltin,cls);}else{ExtendableBuiltin.__proto__=cls;}return ExtendableBuiltin;}function _extendableBuiltin(cls){function ExtendableBuiltin(){cls.apply(this,arguments);}ExtendableBuiltin.prototype=Object.create(cls.prototype,{constructor:{value:cls,enumerable:false,writable:true,configurable:true}});if(Object.setPrototypeOf){Object.setPrototypeOf(ExtendableBuiltin,cls);}else{ExtendableBuiltin.__proto__=cls;}return ExtendableBuiltin;}class BaseException extends _extendableBuiltin(Error){constructor(message,code){super(message);this.code=typeof code!=='undefined'?code:0;}}class BadRequestException extends BaseException{constructor(message,code){super(message,code);this.statusCode=400;this.name='Bad Request';}}exports.BadRequestException=BadRequestException;class UnAuthorizedException extends BaseException{constructor(message,code){super(message,code);this.statusCode=401;this.name='Unauthorized';}}exports.UnAuthorizedException=UnAuthorizedException;class NotFoundException extends _extendableBuiltin2(Error){constructor(message,code){super(message,code);this.statusCode=404;this.name='Not Found';}}exports.NotFoundException=NotFoundException;class DataValidationFailedException extends _extendableBuiltin3(Error){constructor(message,body,code){super(message,code);this.statusCode=422;this.name='Data Validation failed';this.body=body;}}exports.DataValidationFailedException=DataValidationFailedException;exports.default={BadRequestException,UnAuthorizedException,NotFoundException,DataValidationFailedException};

/***/ }),
/* 3 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
Object.defineProperty(exports,"__esModule",{value:true});var _extends2=__webpack_require__(1);var _extends3=_interopRequireDefault(_extends2);var _objectWithoutProperties2=__webpack_require__(0);var _objectWithoutProperties3=_interopRequireDefault(_objectWithoutProperties2);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}/**
 * Class to handle responses back to Lambda
 *
 * @type {Response}
 */class Response{/**
   * Pass the Lambda function that comes in the handler
   *
   * @param lambdaCallback
   * @public
   */constructor(lambdaCallback){this.callback=lambdaCallback;this._statusCode=200;this._headers={};this._options={};}/**
   * Change the status code
   *
   * @param statusCode
   * @returns {Response}
   */statusCode(statusCode){if(statusCode===undefined)return this._statusCode;this._statusCode=parseInt(statusCode);if(isNaN(this._statusCode))this._statusCode=500;if(this._statusCode<200||this._statusCode>599)this._statusCode=500;return this;}/**
   * Get all headers, retrieve a header or add one/many headers
   *
   * @param key
   * @param value
   * @returns {*}
   */headers(key,value){// If called empty it returns all the headers
if(key===undefined&&value===undefined){return this._headers;}// Set or return the key when it is a string
if(typeof key==='string'){if(value===undefined){return this._headers[key.toLowerCase()]||null;}else{this._headers[key.toLowerCase()]=value;return this;}}// Add multiple headers
let headerNames=Object.keys(key);for(let i=0;i<headerNames.length;i++){let headerName=headerNames[i].toLowerCase();this._headers[headerName]=key[headerNames[i]];}return this;}options(key,value){// If called empty it returns all the options
if(key===undefined&&value===undefined){return this._options;}// Set or return the key when it is a string
if(typeof key==='string'){if(value===undefined){return this._options[key]||null;}else{this._options[key]=value;return this;}}// Add multiple options
let optionsNames=Object.keys(key);for(let i=0;i<optionsNames.length;i++){let optionName=optionsNames[i];this._options[optionName]=key[optionsNames[i]];}return this;}/**
   * Send the body as a response
   *
   * @param body
   * @public
   */send(body){const _options=this._options,{raw}=_options,rest=(0,_objectWithoutProperties3.default)(_options,['raw']);if(body===undefined)body={};if(!raw){if(typeof body!=='object')body={message:body};body=JSON.stringify(body||{});}this.callback(null,(0,_extends3.default)({statusCode:this._statusCode,body,headers:this._headers},rest));}/**
   * Fail with a 4XX statusCode
   *
   * @param body
   * @param statusCode
   * @public
   */fail(body,statusCode){if(body===undefined)body={};if(typeof body!=='object')body={message:body};this.statusCode(Math.abs(parseInt(statusCode||400))%100+400).send(Object.assign({message:'Something went wrong'},body||{}));}/**
   * Fail with a 5XX statusCode
   *
   * @param err
   * @param statusCode
   * @public
   */fail500(err,statusCode){if(err===undefined)err=new Error("Called 'fail500' without error");if(!err)err={message:'Internal server error'// Log the error to identify later
};if(err.stack){console.error(err.stack);}else{console.error(err);}// Send a response in a proper format to the customer
this.statusCode(Math.abs(parseInt(statusCode||500))%100+500).send({message:'Internal server error'});}}exports.default=Response;

/***/ }),
/* 4 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
Object.defineProperty(exports,"__esModule",{value:true});/**
 * A Request type to easily send requests to services
 *
 * @type {Request}
 */class Request{/**
   * Create the request by passing the event and context received
   * in the lambda handler. This class has methods to retrieve info
   * from those parameters
   *
   * @param event
   * @param context
   * @public
   */constructor(event,context){this.event=event;this.context=context;}/**
   * Extract a value from an object using dot notation. It can
   * get nested objects
   *
   * @param obj
   * @param key
   * @param defaultValue
   * @returns {*}
   * @public
   */__get(obj,key,defaultValue){if(!obj)return defaultValue===undefined?null:defaultValue;const path=key.split('.');for(let i=0;i<path.length;i++){if(typeof obj==='object'){if(obj[path[i]]){obj=obj[path[i]];}else{obj=defaultValue===undefined?null:defaultValue;break;}}else{return defaultValue===undefined?null:defaultValue;}}return obj;}/**
   * Get a value from a path variable
   *
   * @param key
   * @param defVal
   * @returns {*}
   * @public
   */path(key,defVal){if(key===undefined)return this.event.pathParameters||{};return this.__get(this.event.pathParameters,key,defVal);}/**
   * Get a value from the body of the request
   *
   * @param key
   * @param defVal
   * @returns {*}
   * @public
   */post(key,defVal){// Make sure that body is not a JSON string but an object
// because AWS sends it as a JSON string
if(this.event.body&&typeof this.event.body==='string'){try{this.event.body=JSON.parse(this.event.body);}catch(ex){this.event.body={};}}if(key===undefined)return this.event.body||{};return this.__get(this.event.body,key,defVal);}/**
   * Get a value from the query parameters
   *
   * @param key
   * @param defVal
   * @returns {*}
   * @public
   */query(key,defVal){if(key===undefined)return this.event.queryStringParameters||{};return this.__get(this.event.queryStringParameters,key,defVal);}/**
     * Get a value from the method
     *
     * @returns {*}
     * @public
     */method(){return this.event.httpMethod||'';}/**
   * Get a value from the headers
   *
   * @param key
   * @param defVal
   * @returns {*}
   */headers(key,defVal){if(key===undefined)return this.event.headers||{};return this.__get(this.event.headers,key,defVal);}/**
   * Return the IP Address of the request from the AWS event
   *
   * @returns {*}
   */ip(){let ipVal=this.__get(this.event,'requestContext.identity.sourceIp',null);if(ipVal==='::'){ipVal='127.0.0.1';}return ipVal;}}exports.default=Request;

/***/ }),
/* 5 */
/***/ (function(module, exports) {

module.exports = require("path");

/***/ }),
/* 6 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
var _swapiControllers=__webpack_require__(7);var _persistence=__webpack_require__(16);const filmController=new _swapiControllers.FilmController(_persistence.unitOfWork);module.exports.handler=filmController.init.bind(filmController);

/***/ }),
/* 7 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
Object.defineProperty(exports,"__esModule",{value:true});exports.FilmController=undefined;var _Film=__webpack_require__(8);var _Film2=_interopRequireDefault(_Film);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}exports.FilmController=_Film2.default;

/***/ }),
/* 8 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
Object.defineProperty(exports,"__esModule",{value:true});var _objectWithoutProperties2=__webpack_require__(0);var _objectWithoutProperties3=_interopRequireDefault(_objectWithoutProperties2);var _extends2=__webpack_require__(1);var _extends3=_interopRequireDefault(_extends2);var _swapiHelpers=__webpack_require__(9);var _swapiUtils=__webpack_require__(13);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}const{CorsMiddleware}=_swapiHelpers.Middleware;const getFilms=()=>{return new Promise((resolve,reject)=>{_swapiUtils.Swapi.getFilms(data=>resolve(data));});};class FilmController extends _swapiHelpers.BaseController{constructor(unitOfWork){super();this.unitOfWork=unitOfWork;return this;}init(event,context,callback){this.middleware(CorsMiddleware);return super.init(event,context,callback);}async handle(event,context,callback){const method=this.request.method();var operation=null;switch(method){case'GET':operation=await this.get();break;case'POST':operation=await this.create();break;case'PATCH':operation=await this.update();break;case'DELETE':operation=await this.remove();break;default:res.status(500).send({error:'Method not supported!'});break;}return operation;}async get(){const{Film}=this.unitOfWork;const filters=this.request.query();const films=[];const filmsApi=await getFilms();return(0,_extends3.default)({},filmsApi,{results:filmsApi.results.concat(films)});}async getById(){const{Film}=this.unitOfWork;const{id}=this.request.path();const film=await Film.getById(id);return film;}async create(){const{Film}=this.unitOfWork;const _request$post=this.request.post(),{people,planet,specie,starship,vehicle}=_request$post,film=(0,_objectWithoutProperties3.default)(_request$post,['people','planet','specie','starship','vehicle']);const filmSaved=await Film.create(film);console.log(filmSaved);debugger;console.log(filmSaved.addFilmRelation);return filmSaved;}async update(){const{Film}=this.unitOfWork;const{id}=this.request.path();const film=this.request.post();const rowUpdate=await Film.update(id,film);if(rowUpdate){const filmUpdated=await Film.getById(id);return filmUpdated;}return{};}async remove(){const{Film}=this.unitOfWork;const{id}=this.request.path();const film=await Film.remove(id);return film;}}exports.default=FilmController;

/***/ }),
/* 9 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
Object.defineProperty(exports,"__esModule",{value:true});var _Controller=__webpack_require__(10);Object.defineProperty(exports,'BaseController',{enumerable:true,get:function(){return _interopRequireDefault(_Controller).default;}});var _Exceptions=__webpack_require__(2);Object.defineProperty(exports,'Exceptions',{enumerable:true,get:function(){return _interopRequireDefault(_Exceptions).default;}});var _Middleware=__webpack_require__(11);Object.defineProperty(exports,'Middleware',{enumerable:true,get:function(){return _interopRequireDefault(_Middleware).default;}});var _Request=__webpack_require__(4);Object.defineProperty(exports,'Request',{enumerable:true,get:function(){return _interopRequireDefault(_Request).default;}});var _Response=__webpack_require__(3);Object.defineProperty(exports,'Response',{enumerable:true,get:function(){return _interopRequireDefault(_Response).default;}});function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}

/***/ }),
/* 10 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
Object.defineProperty(exports,"__esModule",{value:true});var _Exceptions=__webpack_require__(2);var _Exceptions2=_interopRequireDefault(_Exceptions);var _Response=__webpack_require__(3);var _Response2=_interopRequireDefault(_Response);var _Request=__webpack_require__(4);var _Request2=_interopRequireDefault(_Request);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}const{BadRequestException,DataValidationFailedException,UnAuthorizedException,NotFoundException}=_Exceptions2.default;class BaseController{constructor(){this.middlewares=[];}init(event,context,callback){this.request=new _Request2.default(event,context);this.response=new _Response2.default(callback);context.callbackWaitsForEmptyEventLoop=false;try{const middlewarePromise=this.processRequest();const handle=this.handle.bind(this);return middlewarePromise.then(handle).then(response=>this.response.send(response)).catch(e=>{this.handleException(e);});}catch(e){this.handleException(e);}}/**
   * You MUST implement this method.
   * It is supposed to be used to handle the logic in
   * your controller. Should returns a promise or raise
   * an Exception from core/Exceptions
   */handle(){throw new Error('You must implement the method handle');}middleware(middlewareClass){this.middlewares.push(middlewareClass);}processRequest(){const promises=[];for(let i=0;i<this.middlewares.length;i++){let Middleware=this.middlewares[i];let middlewareObj=new Middleware(this.request,this.response);let method=middlewareObj.processRequest.bind(middlewareObj);promises.push(method());}return Promise.resolve(Promise.all(promises));}handleException(e){const isSimilarError=function(e){const similarErrors=[BadRequestException,UnAuthorizedException,NotFoundException];for(let i=0;i<similarErrors.length;i++){if(e instanceof similarErrors[i]){return true;}}return false;};if(isSimilarError(e)){this.response.fail({status:e.statusCode,name:e.name,message:e.message,code:e.code},e.statusCode);}else if(e instanceof DataValidationFailedException){this.response.statusCode(e.statusCode).send(e.body);}else{this.response.fail500(e);}}}exports.default=BaseController;

/***/ }),
/* 11 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
Object.defineProperty(exports,"__esModule",{value:true});var _path=__webpack_require__(5);var _path2=_interopRequireDefault(_path);var _i18n=__webpack_require__(12);var _i18n2=_interopRequireDefault(_i18n);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}_i18n2.default.configure({directory:_path2.default.join(__dirname,'./resources/lang'),register:global,updateFiles:false,defaultLocale:'en'});/**
 * Every middleware can define processRequest.
 * That method must return a Promise
 */class BaseMiddleware{constructor(request,response){this.request=request;this.response=response;}}class LanguageMiddleware extends BaseMiddleware{processRequest(){let headers=this.request.headers();this.request.language='en';if(headers['Accept-Language']){this.request.language=headers['Accept-Language'].substring(0,2);_i18n2.default.setLocale(this.request.language);}return Promise.resolve();}}class CorsMiddleware extends BaseMiddleware{processRequest(){this.response.headers({'Access-Control-Allow-Origin':'*','Access-Control-Allow-Credentials':true});return Promise.resolve();}}exports.default={LanguageMiddleware,CorsMiddleware};

/***/ }),
/* 12 */
/***/ (function(module, exports) {

module.exports = require("i18n");

/***/ }),
/* 13 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
Object.defineProperty(exports,"__esModule",{value:true});exports.Swapi=undefined;var _swapi=__webpack_require__(14);var _swapi2=_interopRequireDefault(_swapi);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}exports.Swapi=_swapi2.default;

/***/ }),
/* 14 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
Object.defineProperty(exports,"__esModule",{value:true});const fetch=__webpack_require__(15);const swapiModule=function(){var rootURL="https://swapi.py4e.com/api/";function request(url,cb){return fetch(url).then(function(res){return res.json();}).then(function(data){if(typeof cb==="function"){cb(data);}return data;}).catch(function(err){console.log(err);});}function getResources(cb){return request(rootURL,cb);}function singularRequestGenerator(path){return function(id,cb){return request(rootURL+path+"/"+id+"/",cb);};}function pluralRequestGenerator(path){return function(){let queryObject=undefined;let cb=undefined;if(arguments.length>1){queryObject=arguments[0];cb=arguments[1];}else if(arguments[0]){// If given exactly one argument
if(typeof arguments[0]==="function"){cb=arguments[0];queryObject=null;}else{cb=null;queryObject=arguments[0];}}if(queryObject){let searchParams=new URLSearchParams();for(let key of Object.keys(queryObject)){let value=queryObject[key];searchParams.append(key,value);}return request(rootURL+path+"/?"+searchParams.toString(),cb);}return request(rootURL+path+"/",cb);};}return{getResources:getResources,getPerson:singularRequestGenerator("people"),getPeople:pluralRequestGenerator("people"),getFilm:singularRequestGenerator("films"),getFilms:pluralRequestGenerator("films"),getPlanet:singularRequestGenerator("planets"),getPlanets:pluralRequestGenerator("planets"),getSpecies:singularRequestGenerator("species"),getAllSpecies:pluralRequestGenerator("species"),getStarship:singularRequestGenerator("starships"),getStarships:pluralRequestGenerator("starships"),getVehicle:singularRequestGenerator("vehicles"),getVehicles:pluralRequestGenerator("vehicles")};}();exports.default=swapiModule;

/***/ }),
/* 15 */
/***/ (function(module, exports) {

module.exports = require("node-fetch");

/***/ }),
/* 16 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
Object.defineProperty(exports,"__esModule",{value:true});exports.unitOfWork=undefined;var _UnitOfWork=__webpack_require__(17);var _UnitOfWork2=_interopRequireDefault(_UnitOfWork);var _DBContext=__webpack_require__(21);var _DBContext2=_interopRequireDefault(_DBContext);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}const unitOfWork=new _UnitOfWork2.default(_DBContext2.default);exports.unitOfWork=unitOfWork;

/***/ }),
/* 17 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
Object.defineProperty(exports,"__esModule",{value:true});var _swapiRepositories=__webpack_require__(18);class UnitOfWork{constructor(dbContext){this.dbContext=dbContext;this.Film=new _swapiRepositories.FilmRepository(dbContext);}}exports.default=UnitOfWork;

/***/ }),
/* 18 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
Object.defineProperty(exports,"__esModule",{value:true});exports.FilmRepository=undefined;var _Film=__webpack_require__(19);var _Film2=_interopRequireDefault(_Film);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}exports.FilmRepository=_Film2.default;

/***/ }),
/* 19 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
Object.defineProperty(exports,"__esModule",{value:true});var _IRepository=__webpack_require__(20);var _IRepository2=_interopRequireDefault(_IRepository);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}class FilmRepository extends _IRepository2.default{constructor(dbContext){super();this.dbContext=dbContext;return this;}async create(film){try{const{Film}=this.dbContext;const filmSaved=await Film.create(film);return filmSaved;}catch(e){console.log(e);}}async update(id,film){try{const{Film}=this.dbContext;const filmSaved=await Film.update(film,{where:{id}});return filmSaved;}catch(e){console.log(e);}}async get(filters){try{const{Film}=this.dbContext;const film=await Film.findAll(filters);return film;}catch(e){console.log(e);}}async getById(id){try{const{Film}=this.dbContext;const film=await Film.findOne({where:{id}});return film;}catch(e){console.log(e);}}async remove(id){const{Film}=this.dbContext;const film=await Film.findOne({where:{id}});await Film.destroy({where:{id}});return film;}}exports.default=FilmRepository;

/***/ }),
/* 20 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
Object.defineProperty(exports,"__esModule",{value:true});class IRepository{constructor(){if(this.create===undefined)throw new Error('Must override .create() method.');if(this.update===undefined)throw new Error('Must override .update() method');if(this.get===undefined)throw new Error('Must override .get() metod');if(this.getById===undefined)throw new Error('Must override .getById() method');if(this.remove===undefined)throw new Error('Must override .remove() method');}}exports.default=IRepository;

/***/ }),
/* 21 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
Object.defineProperty(exports,"__esModule",{value:true});var _swapiDatabase=__webpack_require__(22);var _swapiDatabase2=_interopRequireDefault(_swapiDatabase);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}const env=process.env.NODE_ENV||'development';const config=__webpack_require__(26)[env];const cnManager=new _swapiDatabase2.default(config);const db=cnManager.getConnection();exports.default=db;

/***/ }),
/* 22 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
const fs=__webpack_require__(23);const path=__webpack_require__(5);const Sequelize=__webpack_require__(24);const basename=path.basename(__filename);const{FRAMEWORK}=__webpack_require__(25);var _instance=null;const modelsPath=path.resolve(__dirname,'./models');class ConnectionManager{constructor(config={}){this.framework=config.framework||FRAMEWORK.SEQUELIZE;this.database=config.database;this.username=config.username;this.password=config.password;this.host=config.host;this.port=config.port;this.dialect=config.dialect;this.sequelize={};this.directory=config.directory||modelsPath;this.use_env_variable=config.use_env_variable;this.connection=null;if(!_instance){_instance=this;}return _instance;}getConnection(){switch(this.framework){case FRAMEWORK.SEQUELIZE:this.connection=this.connection||this.getSequelize();break;default:this.connection=this.connection||this.getSequelize();break;}return this.connection;}getSequelize(){const db={};const{database,username,password,directory,host,port,dialect,use_env_variable}=this;const config={database,username,password,host,port,dialect};try{if(use_env_variable){this.sequelize=new Sequelize(process.env[use_env_variable],config);}else{this.sequelize=new Sequelize(database,username,password,config);}fs.readdirSync(directory).filter(file=>{return file.indexOf('.')!==0&&file!==basename&&file.slice(-3)==='.js';}).forEach(file=>{const model=this.sequelize['import'](path.join(directory,file));db[model.name]=model;});Object.keys(db).forEach(modelName=>{if(db[modelName].associate){db[modelName].associate(db);}});db.sequelize=this.sequelize;db.Sequelize=Sequelize;}catch(err){db.stacktrace=err;db.message='ConnectionManagerError in getSequelizeConnection';console.error(err);}return db;}}module.exports=ConnectionManager;

/***/ }),
/* 23 */
/***/ (function(module, exports) {

module.exports = require("fs");

/***/ }),
/* 24 */
/***/ (function(module, exports) {

module.exports = require("sequelize");

/***/ }),
/* 25 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
const FRAMEWORK={SEQUELIZE:'sequelize'};module.exports={FRAMEWORK};

/***/ }),
/* 26 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
const yenv=__webpack_require__(27);const env=process.env.NODE_ENV||'development';const stage=yenv('.env.yml',{env});module.exports={development:{username:stage.DB_USERNAME,password:stage.DB_PASSWORD,database:stage.DB_DATABASE,host:stage.DB_HOST,dialect:stage.DB_DIALECT},test:{username:stage.DB_USERNAME,password:stage.DB_PASSWORD,database:stage.DB_DATABASE,host:stage.DB_HOST,dialect:stage.DB_DIALECT},production:{username:stage.DB_USERNAME,password:stage.DB_PASSWORD,database:stage.DB_DATABASE,host:stage.DB_HOST,dialect:stage.DB_DIALECT}};

/***/ }),
/* 27 */
/***/ (function(module, exports) {

module.exports = require("yenv");

/***/ })
/******/ ])));
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAgNzM0NTk1NTRmMGQ2NmQ4MTYxNTgiLCJ3ZWJwYWNrOi8vL2V4dGVybmFsIFwiYmFiZWwtcnVudGltZS9oZWxwZXJzL29iamVjdFdpdGhvdXRQcm9wZXJ0aWVzXCIiLCJ3ZWJwYWNrOi8vL2V4dGVybmFsIFwiYmFiZWwtcnVudGltZS9oZWxwZXJzL2V4dGVuZHNcIiIsIndlYnBhY2s6Ly8vLi9oZWxwZXJzL0V4Y2VwdGlvbnMuanMiLCJ3ZWJwYWNrOi8vLy4vaGVscGVycy9SZXNwb25zZS5qcyIsIndlYnBhY2s6Ly8vLi9oZWxwZXJzL1JlcXVlc3QuanMiLCJ3ZWJwYWNrOi8vL2V4dGVybmFsIFwicGF0aFwiIiwid2VicGFjazovLy8uL2Z1bmN0aW9ucy9maWxtLmpzIiwid2VicGFjazovLy8uL2NvbnRyb2xsZXJzL2luZGV4LmpzIiwid2VicGFjazovLy8uL2NvbnRyb2xsZXJzL0ZpbG0uanMiLCJ3ZWJwYWNrOi8vLy4vaGVscGVycy9pbmRleC5qcyIsIndlYnBhY2s6Ly8vLi9oZWxwZXJzL0NvbnRyb2xsZXIuanMiLCJ3ZWJwYWNrOi8vLy4vaGVscGVycy9NaWRkbGV3YXJlLmpzIiwid2VicGFjazovLy9leHRlcm5hbCBcImkxOG5cIiIsIndlYnBhY2s6Ly8vLi91dGlscy9pbmRleC5qcyIsIndlYnBhY2s6Ly8vLi91dGlscy9zd2FwaS5qcyIsIndlYnBhY2s6Ly8vZXh0ZXJuYWwgXCJub2RlLWZldGNoXCIiLCJ3ZWJwYWNrOi8vLy4vcGVyc2lzdGVuY2UvaW5kZXguanMiLCJ3ZWJwYWNrOi8vLy4vcGVyc2lzdGVuY2UvVW5pdE9mV29yay5qcyIsIndlYnBhY2s6Ly8vLi9yZXBvc2l0b3JpZXMvaW5kZXguanMiLCJ3ZWJwYWNrOi8vLy4vcmVwb3NpdG9yaWVzL0ZpbG0uanMiLCJ3ZWJwYWNrOi8vLy4vcmVwb3NpdG9yaWVzL0lSZXBvc2l0b3J5LmpzIiwid2VicGFjazovLy8uL3BlcnNpc3RlbmNlL0RCQ29udGV4dC5qcyIsIndlYnBhY2s6Ly8vLi9kYXRhYmFzZS9pbmRleC5qcyIsIndlYnBhY2s6Ly8vZXh0ZXJuYWwgXCJmc1wiIiwid2VicGFjazovLy9leHRlcm5hbCBcInNlcXVlbGl6ZVwiIiwid2VicGFjazovLy8uL2NvbnN0YW50cy9pbmRleC5qcyIsIndlYnBhY2s6Ly8vLi9kYXRhYmFzZS9jb25maWcuanMiLCJ3ZWJwYWNrOi8vL2V4dGVybmFsIFwieWVudlwiIl0sIm5hbWVzIjpbIkJhc2VFeGNlcHRpb24iLCJFcnJvciIsImNvbnN0cnVjdG9yIiwibWVzc2FnZSIsImNvZGUiLCJCYWRSZXF1ZXN0RXhjZXB0aW9uIiwic3RhdHVzQ29kZSIsIm5hbWUiLCJVbkF1dGhvcml6ZWRFeGNlcHRpb24iLCJOb3RGb3VuZEV4Y2VwdGlvbiIsIkRhdGFWYWxpZGF0aW9uRmFpbGVkRXhjZXB0aW9uIiwiYm9keSIsIlJlc3BvbnNlIiwibGFtYmRhQ2FsbGJhY2siLCJjYWxsYmFjayIsIl9zdGF0dXNDb2RlIiwiX2hlYWRlcnMiLCJfb3B0aW9ucyIsInVuZGVmaW5lZCIsInBhcnNlSW50IiwiaXNOYU4iLCJoZWFkZXJzIiwia2V5IiwidmFsdWUiLCJ0b0xvd2VyQ2FzZSIsImhlYWRlck5hbWVzIiwiT2JqZWN0Iiwia2V5cyIsImkiLCJsZW5ndGgiLCJoZWFkZXJOYW1lIiwib3B0aW9ucyIsIm9wdGlvbnNOYW1lcyIsIm9wdGlvbk5hbWUiLCJzZW5kIiwicmF3IiwicmVzdCIsIkpTT04iLCJzdHJpbmdpZnkiLCJmYWlsIiwiTWF0aCIsImFicyIsImFzc2lnbiIsImZhaWw1MDAiLCJlcnIiLCJzdGFjayIsImNvbnNvbGUiLCJlcnJvciIsIlJlcXVlc3QiLCJldmVudCIsImNvbnRleHQiLCJfX2dldCIsIm9iaiIsImRlZmF1bHRWYWx1ZSIsInBhdGgiLCJzcGxpdCIsImRlZlZhbCIsInBhdGhQYXJhbWV0ZXJzIiwicG9zdCIsInBhcnNlIiwiZXgiLCJxdWVyeSIsInF1ZXJ5U3RyaW5nUGFyYW1ldGVycyIsIm1ldGhvZCIsImh0dHBNZXRob2QiLCJpcCIsImlwVmFsIiwiZmlsbUNvbnRyb2xsZXIiLCJGaWxtQ29udHJvbGxlciIsInVuaXRPZldvcmsiLCJtb2R1bGUiLCJleHBvcnRzIiwiaGFuZGxlciIsImluaXQiLCJiaW5kIiwiQ29yc01pZGRsZXdhcmUiLCJNaWRkbGV3YXJlIiwiZ2V0RmlsbXMiLCJQcm9taXNlIiwicmVzb2x2ZSIsInJlamVjdCIsIlN3YXBpIiwiZGF0YSIsIkJhc2VDb250cm9sbGVyIiwibWlkZGxld2FyZSIsImhhbmRsZSIsInJlcXVlc3QiLCJvcGVyYXRpb24iLCJnZXQiLCJjcmVhdGUiLCJ1cGRhdGUiLCJyZW1vdmUiLCJyZXMiLCJzdGF0dXMiLCJGaWxtIiwiZmlsdGVycyIsImZpbG1zIiwiZmlsbXNBcGkiLCJyZXN1bHRzIiwiY29uY2F0IiwiZ2V0QnlJZCIsImlkIiwiZmlsbSIsInBlb3BsZSIsInBsYW5ldCIsInNwZWNpZSIsInN0YXJzaGlwIiwidmVoaWNsZSIsImZpbG1TYXZlZCIsImxvZyIsImFkZEZpbG1SZWxhdGlvbiIsInJvd1VwZGF0ZSIsImZpbG1VcGRhdGVkIiwiZGVmYXVsdCIsIkV4Y2VwdGlvbnMiLCJtaWRkbGV3YXJlcyIsInJlc3BvbnNlIiwiY2FsbGJhY2tXYWl0c0ZvckVtcHR5RXZlbnRMb29wIiwibWlkZGxld2FyZVByb21pc2UiLCJwcm9jZXNzUmVxdWVzdCIsInRoZW4iLCJjYXRjaCIsImUiLCJoYW5kbGVFeGNlcHRpb24iLCJtaWRkbGV3YXJlQ2xhc3MiLCJwdXNoIiwicHJvbWlzZXMiLCJtaWRkbGV3YXJlT2JqIiwiYWxsIiwiaXNTaW1pbGFyRXJyb3IiLCJzaW1pbGFyRXJyb3JzIiwiaTE4biIsImNvbmZpZ3VyZSIsImRpcmVjdG9yeSIsImpvaW4iLCJfX2Rpcm5hbWUiLCJyZWdpc3RlciIsImdsb2JhbCIsInVwZGF0ZUZpbGVzIiwiZGVmYXVsdExvY2FsZSIsIkJhc2VNaWRkbGV3YXJlIiwiTGFuZ3VhZ2VNaWRkbGV3YXJlIiwibGFuZ3VhZ2UiLCJzdWJzdHJpbmciLCJzZXRMb2NhbGUiLCJmZXRjaCIsInJlcXVpcmUiLCJzd2FwaU1vZHVsZSIsInJvb3RVUkwiLCJ1cmwiLCJjYiIsImpzb24iLCJnZXRSZXNvdXJjZXMiLCJzaW5ndWxhclJlcXVlc3RHZW5lcmF0b3IiLCJwbHVyYWxSZXF1ZXN0R2VuZXJhdG9yIiwicXVlcnlPYmplY3QiLCJhcmd1bWVudHMiLCJzZWFyY2hQYXJhbXMiLCJVUkxTZWFyY2hQYXJhbXMiLCJhcHBlbmQiLCJ0b1N0cmluZyIsImdldFBlcnNvbiIsImdldFBlb3BsZSIsImdldEZpbG0iLCJnZXRQbGFuZXQiLCJnZXRQbGFuZXRzIiwiZ2V0U3BlY2llcyIsImdldEFsbFNwZWNpZXMiLCJnZXRTdGFyc2hpcCIsImdldFN0YXJzaGlwcyIsImdldFZlaGljbGUiLCJnZXRWZWhpY2xlcyIsIlVuaXRPZldvcmsiLCJEQkNvbnRleHQiLCJkYkNvbnRleHQiLCJGaWxtUmVwb3NpdG9yeSIsIklSZXBvc2l0b3J5Iiwid2hlcmUiLCJmaW5kQWxsIiwiZmluZE9uZSIsImRlc3Ryb3kiLCJlbnYiLCJwcm9jZXNzIiwiTk9ERV9FTlYiLCJjb25maWciLCJjbk1hbmFnZXIiLCJDb25uZWN0aW9uTWFuYWdlciIsImRiIiwiZ2V0Q29ubmVjdGlvbiIsImZzIiwiU2VxdWVsaXplIiwiYmFzZW5hbWUiLCJfX2ZpbGVuYW1lIiwiRlJBTUVXT1JLIiwiX2luc3RhbmNlIiwibW9kZWxzUGF0aCIsImZyYW1ld29yayIsIlNFUVVFTElaRSIsImRhdGFiYXNlIiwidXNlcm5hbWUiLCJwYXNzd29yZCIsImhvc3QiLCJwb3J0IiwiZGlhbGVjdCIsInNlcXVlbGl6ZSIsInVzZV9lbnZfdmFyaWFibGUiLCJjb25uZWN0aW9uIiwiZ2V0U2VxdWVsaXplIiwicmVhZGRpclN5bmMiLCJmaWx0ZXIiLCJmaWxlIiwiaW5kZXhPZiIsInNsaWNlIiwiZm9yRWFjaCIsIm1vZGVsIiwibW9kZWxOYW1lIiwiYXNzb2NpYXRlIiwic3RhY2t0cmFjZSIsInllbnYiLCJzdGFnZSIsImRldmVsb3BtZW50IiwiREJfVVNFUk5BTUUiLCJEQl9QQVNTV09SRCIsIkRCX0RBVEFCQVNFIiwiREJfSE9TVCIsIkRCX0RJQUxFQ1QiLCJ0ZXN0IiwicHJvZHVjdGlvbiJdLCJtYXBwaW5ncyI6IjtRQUFBO1FBQ0E7O1FBRUE7UUFDQTs7UUFFQTtRQUNBO1FBQ0E7UUFDQTtRQUNBO1FBQ0E7UUFDQTtRQUNBO1FBQ0E7UUFDQTs7UUFFQTtRQUNBOztRQUVBO1FBQ0E7O1FBRUE7UUFDQTtRQUNBOzs7UUFHQTtRQUNBOztRQUVBO1FBQ0E7O1FBRUE7UUFDQTtRQUNBO1FBQ0E7UUFDQTtRQUNBO1FBQ0E7UUFDQSxLQUFLO1FBQ0w7UUFDQTs7UUFFQTtRQUNBO1FBQ0E7UUFDQSwyQkFBMkIsMEJBQTBCLEVBQUU7UUFDdkQsaUNBQWlDLGVBQWU7UUFDaEQ7UUFDQTtRQUNBOztRQUVBO1FBQ0Esc0RBQXNELCtEQUErRDs7UUFFckg7UUFDQTs7UUFFQTtRQUNBOzs7Ozs7O0FDN0RBLDBFOzs7Ozs7QUNBQSwwRDs7Ozs7OzswbUNDRUEsS0FBTUEsY0FBTiw0QkFBNEJDLEtBQTVCLENBQWtDLENBQ2hDQyxZQUFZQyxPQUFaLENBQXFCQyxJQUFyQixDQUEyQixDQUN6QixNQUFNRCxPQUFOLEVBQ0EsS0FBS0MsSUFBTCxDQUFZLE1BQU9BLEtBQVAsR0FBZ0IsV0FBaEIsQ0FBOEJBLElBQTlCLENBQXFDLENBQWpELENBQ0QsQ0FKK0IsQ0FPM0IsS0FBTUMsb0JBQU4sUUFBa0NMLGNBQWMsQ0FDckRFLFlBQVlDLE9BQVosQ0FBcUJDLElBQXJCLENBQTJCLENBQ3pCLE1BQU1ELE9BQU4sQ0FBZUMsSUFBZixFQUNBLEtBQUtFLFVBQUwsQ0FBa0IsR0FBbEIsQ0FDQSxLQUFLQyxJQUFMLENBQVksYUFBWixDQUNELENBTG9ELEMsUUFBMUNGLG1CLENBQUFBLG1CLENBUU4sS0FBTUcsc0JBQU4sUUFBb0NSLGNBQWMsQ0FDdkRFLFlBQVlDLE9BQVosQ0FBcUJDLElBQXJCLENBQTJCLENBQ3pCLE1BQU1ELE9BQU4sQ0FBZUMsSUFBZixFQUNBLEtBQUtFLFVBQUwsQ0FBa0IsR0FBbEIsQ0FDQSxLQUFLQyxJQUFMLENBQVksY0FBWixDQUNELENBTHNELEMsUUFBNUNDLHFCLENBQUFBLHFCLENBUU4sS0FBTUMsa0JBQU4sNkJBQWdDUixLQUFoQyxDQUFzQyxDQUMzQ0MsWUFBWUMsT0FBWixDQUFxQkMsSUFBckIsQ0FBMkIsQ0FDekIsTUFBTUQsT0FBTixDQUFlQyxJQUFmLEVBQ0EsS0FBS0UsVUFBTCxDQUFrQixHQUFsQixDQUNBLEtBQUtDLElBQUwsQ0FBWSxXQUFaLENBQ0QsQ0FMMEMsQyxRQUFoQ0UsaUIsQ0FBQUEsaUIsQ0FRTixLQUFNQyw4QkFBTiw2QkFBNENULEtBQTVDLENBQWtELENBQ3ZEQyxZQUFZQyxPQUFaLENBQXFCUSxJQUFyQixDQUEyQlAsSUFBM0IsQ0FBaUMsQ0FDL0IsTUFBTUQsT0FBTixDQUFlQyxJQUFmLEVBQ0EsS0FBS0UsVUFBTCxDQUFrQixHQUFsQixDQUNBLEtBQUtDLElBQUwsQ0FBWSx3QkFBWixDQUNBLEtBQUtJLElBQUwsQ0FBWUEsSUFBWixDQUNELENBTnNELEMsUUFBNUNELDZCLENBQUFBLDZCLGlCQVNFLENBQ2JMLG1CQURhLENBRWJHLHFCQUZhLENBR2JDLGlCQUhhLENBSWJDLDZCQUphLEM7Ozs7Ozs7c1dDMUNmOzs7O0dBS2UsS0FBTUUsU0FBUyxDQUM1Qjs7Ozs7S0FNQVYsWUFBWVcsY0FBWixDQUE0QixDQUMxQixLQUFLQyxRQUFMLENBQWdCRCxjQUFoQixDQUNBLEtBQUtFLFdBQUwsQ0FBbUIsR0FBbkIsQ0FDQSxLQUFLQyxRQUFMLENBQWdCLEVBQWhCLENBQ0EsS0FBS0MsUUFBTCxDQUFnQixFQUFoQixDQUNELENBRUQ7Ozs7O0tBTUFYLFdBQVdBLFVBQVgsQ0FBdUIsQ0FDckIsR0FBSUEsYUFBZVksU0FBbkIsQ0FBOEIsTUFBTyxNQUFLSCxXQUFaLENBQzlCLEtBQUtBLFdBQUwsQ0FBbUJJLFNBQVNiLFVBQVQsQ0FBbkIsQ0FDQSxHQUFJYyxNQUFNLEtBQUtMLFdBQVgsQ0FBSixDQUE2QixLQUFLQSxXQUFMLENBQW1CLEdBQW5CLENBQzdCLEdBQUksS0FBS0EsV0FBTCxDQUFtQixHQUFuQixFQUEwQixLQUFLQSxXQUFMLENBQW1CLEdBQWpELENBQXNELEtBQUtBLFdBQUwsQ0FBbUIsR0FBbkIsQ0FDdEQsTUFBTyxLQUFQLENBQ0QsQ0FFRDs7Ozs7O0tBT0FNLFFBQVFDLEdBQVIsQ0FBYUMsS0FBYixDQUFvQixDQUNsQjtBQUNBLEdBQUlELE1BQVFKLFNBQVIsRUFBcUJLLFFBQVVMLFNBQW5DLENBQThDLENBQzVDLE1BQU8sTUFBS0YsUUFBWixDQUNELENBRUQ7QUFDQSxHQUFJLE1BQU9NLElBQVAsR0FBZSxRQUFuQixDQUE2QixDQUMzQixHQUFJQyxRQUFVTCxTQUFkLENBQXlCLENBQ3ZCLE1BQU8sTUFBS0YsUUFBTCxDQUFjTSxJQUFJRSxXQUFKLEVBQWQsR0FBb0MsSUFBM0MsQ0FDRCxDQUZELElBRU8sQ0FDTCxLQUFLUixRQUFMLENBQWNNLElBQUlFLFdBQUosRUFBZCxFQUFtQ0QsS0FBbkMsQ0FDQSxNQUFPLEtBQVAsQ0FDRCxDQUNGLENBRUQ7QUFDQSxHQUFJRSxhQUFjQyxPQUFPQyxJQUFQLENBQVlMLEdBQVosQ0FBbEIsQ0FDQSxJQUFLLEdBQUlNLEdBQUksQ0FBYixDQUFnQkEsRUFBSUgsWUFBWUksTUFBaEMsQ0FBd0NELEdBQXhDLENBQTZDLENBQzNDLEdBQUlFLFlBQWFMLFlBQVlHLENBQVosRUFBZUosV0FBZixFQUFqQixDQUNBLEtBQUtSLFFBQUwsQ0FBY2MsVUFBZCxFQUE0QlIsSUFBSUcsWUFBWUcsQ0FBWixDQUFKLENBQTVCLENBQ0QsQ0FFRCxNQUFPLEtBQVAsQ0FDRCxDQUVERyxRQUFRVCxHQUFSLENBQWFDLEtBQWIsQ0FBb0IsQ0FDbEI7QUFDQSxHQUFJRCxNQUFRSixTQUFSLEVBQXFCSyxRQUFVTCxTQUFuQyxDQUE4QyxDQUM1QyxNQUFPLE1BQUtELFFBQVosQ0FDRCxDQUVEO0FBQ0EsR0FBSSxNQUFPSyxJQUFQLEdBQWUsUUFBbkIsQ0FBNkIsQ0FDM0IsR0FBSUMsUUFBVUwsU0FBZCxDQUF5QixDQUN2QixNQUFPLE1BQUtELFFBQUwsQ0FBY0ssR0FBZCxHQUFzQixJQUE3QixDQUNELENBRkQsSUFFTyxDQUNMLEtBQUtMLFFBQUwsQ0FBY0ssR0FBZCxFQUFxQkMsS0FBckIsQ0FDQSxNQUFPLEtBQVAsQ0FDRCxDQUNGLENBRUQ7QUFDQSxHQUFJUyxjQUFlTixPQUFPQyxJQUFQLENBQVlMLEdBQVosQ0FBbkIsQ0FDQSxJQUFLLEdBQUlNLEdBQUksQ0FBYixDQUFnQkEsRUFBSUksYUFBYUgsTUFBakMsQ0FBeUNELEdBQXpDLENBQThDLENBQzVDLEdBQUlLLFlBQWFELGFBQWFKLENBQWIsQ0FBakIsQ0FDQSxLQUFLWCxRQUFMLENBQWNnQixVQUFkLEVBQTRCWCxJQUFJVSxhQUFhSixDQUFiLENBQUosQ0FBNUIsQ0FDRCxDQUVELE1BQU8sS0FBUCxDQUNELENBRUQ7Ozs7O0tBTUFNLEtBQUt2QixJQUFMLENBQVcsQ0FDVCxlQUF5QixLQUFLTSxRQUE5QixDQUFNLENBQUVrQixHQUFGLENBQU4sVUFBZ0JDLElBQWhCLHlEQUVBLEdBQUl6QixPQUFTTyxTQUFiLENBQXdCUCxLQUFPLEVBQVAsQ0FDeEIsR0FBSSxDQUFDd0IsR0FBTCxDQUFVLENBQ1IsR0FBSSxNQUFPeEIsS0FBUCxHQUFnQixRQUFwQixDQUE4QkEsS0FBTyxDQUFFUixRQUFTUSxJQUFYLENBQVAsQ0FDOUJBLEtBQU8wQixLQUFLQyxTQUFMLENBQWUzQixNQUFRLEVBQXZCLENBQVAsQ0FDRCxDQUVELEtBQUtHLFFBQUwsQ0FBYyxJQUFkLHdCQUNFUixXQUFZLEtBQUtTLFdBRG5CLENBRUVKLElBRkYsQ0FHRVUsUUFBUyxLQUFLTCxRQUhoQixFQUlLb0IsSUFKTCxHQU1ELENBRUQ7Ozs7OztLQU9BRyxLQUFLNUIsSUFBTCxDQUFXTCxVQUFYLENBQXVCLENBQ3JCLEdBQUlLLE9BQVNPLFNBQWIsQ0FBd0JQLEtBQU8sRUFBUCxDQUN4QixHQUFJLE1BQU9BLEtBQVAsR0FBZ0IsUUFBcEIsQ0FBOEJBLEtBQU8sQ0FBRVIsUUFBU1EsSUFBWCxDQUFQLENBQzlCLEtBQUtMLFVBQUwsQ0FBZ0JrQyxLQUFLQyxHQUFMLENBQVN0QixTQUFTYixZQUFjLEdBQXZCLENBQVQsRUFBd0MsR0FBeEMsQ0FBOEMsR0FBOUQsRUFBbUU0QixJQUFuRSxDQUNFUixPQUFPZ0IsTUFBUCxDQUNFLENBQ0V2QyxRQUFTLHNCQURYLENBREYsQ0FJRVEsTUFBUSxFQUpWLENBREYsRUFRRCxDQUVEOzs7Ozs7S0FPQWdDLFFBQVFDLEdBQVIsQ0FBYXRDLFVBQWIsQ0FBeUIsQ0FDdkIsR0FBSXNDLE1BQVExQixTQUFaLENBQXVCMEIsSUFBTSxHQUFJM0MsTUFBSixDQUFVLGdDQUFWLENBQU4sQ0FDdkIsR0FBSSxDQUFDMkMsR0FBTCxDQUFVQSxJQUFNLENBQUV6QyxRQUFTLHVCQUUzQjtBQUZnQixDQUFOLENBR1YsR0FBSXlDLElBQUlDLEtBQVIsQ0FBZSxDQUNiQyxRQUFRQyxLQUFSLENBQWNILElBQUlDLEtBQWxCLEVBQ0QsQ0FGRCxJQUVPLENBQ0xDLFFBQVFDLEtBQVIsQ0FBY0gsR0FBZCxFQUNELENBRUQ7QUFDQSxLQUFLdEMsVUFBTCxDQUFnQmtDLEtBQUtDLEdBQUwsQ0FBU3RCLFNBQVNiLFlBQWMsR0FBdkIsQ0FBVCxFQUF3QyxHQUF4QyxDQUE4QyxHQUE5RCxFQUFtRTRCLElBQW5FLENBQXdFLENBQ3RFL0IsUUFBUyx1QkFENkQsQ0FBeEUsRUFHRCxDQXhKMkIsQyxnQkFBVFMsUTs7Ozs7Ozt5RENMckI7Ozs7R0FLZSxLQUFNb0MsUUFBUSxDQUMzQjs7Ozs7Ozs7S0FTQTlDLFlBQVkrQyxLQUFaLENBQW1CQyxPQUFuQixDQUE0QixDQUMxQixLQUFLRCxLQUFMLENBQWFBLEtBQWIsQ0FDQSxLQUFLQyxPQUFMLENBQWVBLE9BQWYsQ0FDRCxDQUVEOzs7Ozs7Ozs7S0FVQUMsTUFBTUMsR0FBTixDQUFXOUIsR0FBWCxDQUFnQitCLFlBQWhCLENBQThCLENBQzVCLEdBQUksQ0FBQ0QsR0FBTCxDQUFVLE1BQU9DLGdCQUFpQm5DLFNBQWpCLENBQTZCLElBQTdCLENBQW9DbUMsWUFBM0MsQ0FDVixLQUFNQyxNQUFPaEMsSUFBSWlDLEtBQUosQ0FBVSxHQUFWLENBQWIsQ0FDQSxJQUFLLEdBQUkzQixHQUFJLENBQWIsQ0FBZ0JBLEVBQUkwQixLQUFLekIsTUFBekIsQ0FBaUNELEdBQWpDLENBQXNDLENBQ3BDLEdBQUksTUFBT3dCLElBQVAsR0FBZSxRQUFuQixDQUE2QixDQUMzQixHQUFJQSxJQUFJRSxLQUFLMUIsQ0FBTCxDQUFKLENBQUosQ0FBa0IsQ0FDaEJ3QixJQUFNQSxJQUFJRSxLQUFLMUIsQ0FBTCxDQUFKLENBQU4sQ0FDRCxDQUZELElBRU8sQ0FDTHdCLElBQU1DLGVBQWlCbkMsU0FBakIsQ0FBNkIsSUFBN0IsQ0FBb0NtQyxZQUExQyxDQUNBLE1BQ0QsQ0FDRixDQVBELElBT08sQ0FDTCxNQUFPQSxnQkFBaUJuQyxTQUFqQixDQUE2QixJQUE3QixDQUFvQ21DLFlBQTNDLENBQ0QsQ0FDRixDQUNELE1BQU9ELElBQVAsQ0FDRCxDQUVEOzs7Ozs7O0tBUUFFLEtBQUtoQyxHQUFMLENBQVVrQyxNQUFWLENBQWtCLENBQ2hCLEdBQUlsQyxNQUFRSixTQUFaLENBQXVCLE1BQU8sTUFBSytCLEtBQUwsQ0FBV1EsY0FBWCxFQUE2QixFQUFwQyxDQUN2QixNQUFPLE1BQUtOLEtBQUwsQ0FBVyxLQUFLRixLQUFMLENBQVdRLGNBQXRCLENBQXNDbkMsR0FBdEMsQ0FBMkNrQyxNQUEzQyxDQUFQLENBQ0QsQ0FFRDs7Ozs7OztLQVFBRSxLQUFLcEMsR0FBTCxDQUFVa0MsTUFBVixDQUFrQixDQUNoQjtBQUNBO0FBQ0EsR0FBSSxLQUFLUCxLQUFMLENBQVd0QyxJQUFYLEVBQW1CLE1BQU8sTUFBS3NDLEtBQUwsQ0FBV3RDLElBQWxCLEdBQTJCLFFBQWxELENBQTRELENBQzFELEdBQUksQ0FDRixLQUFLc0MsS0FBTCxDQUFXdEMsSUFBWCxDQUFrQjBCLEtBQUtzQixLQUFMLENBQVcsS0FBS1YsS0FBTCxDQUFXdEMsSUFBdEIsQ0FBbEIsQ0FDRCxDQUFDLE1BQU9pRCxFQUFQLENBQVcsQ0FDWCxLQUFLWCxLQUFMLENBQVd0QyxJQUFYLENBQWtCLEVBQWxCLENBQ0QsQ0FDRixDQUVELEdBQUlXLE1BQVFKLFNBQVosQ0FBdUIsTUFBTyxNQUFLK0IsS0FBTCxDQUFXdEMsSUFBWCxFQUFtQixFQUExQixDQUN2QixNQUFPLE1BQUt3QyxLQUFMLENBQVcsS0FBS0YsS0FBTCxDQUFXdEMsSUFBdEIsQ0FBNEJXLEdBQTVCLENBQWlDa0MsTUFBakMsQ0FBUCxDQUNELENBRUQ7Ozs7Ozs7S0FRQUssTUFBTXZDLEdBQU4sQ0FBV2tDLE1BQVgsQ0FBbUIsQ0FDakIsR0FBSWxDLE1BQVFKLFNBQVosQ0FBdUIsTUFBTyxNQUFLK0IsS0FBTCxDQUFXYSxxQkFBWCxFQUFvQyxFQUEzQyxDQUN2QixNQUFPLE1BQUtYLEtBQUwsQ0FBVyxLQUFLRixLQUFMLENBQVdhLHFCQUF0QixDQUE2Q3hDLEdBQTdDLENBQWtEa0MsTUFBbEQsQ0FBUCxDQUNELENBRUQ7Ozs7O09BTUFPLFFBQVMsQ0FDUCxNQUFPLE1BQUtkLEtBQUwsQ0FBV2UsVUFBWCxFQUF5QixFQUFoQyxDQUNELENBRUQ7Ozs7OztLQU9BM0MsUUFBUUMsR0FBUixDQUFha0MsTUFBYixDQUFxQixDQUNuQixHQUFJbEMsTUFBUUosU0FBWixDQUF1QixNQUFPLE1BQUsrQixLQUFMLENBQVc1QixPQUFYLEVBQXNCLEVBQTdCLENBQ3ZCLE1BQU8sTUFBSzhCLEtBQUwsQ0FBVyxLQUFLRixLQUFMLENBQVc1QixPQUF0QixDQUErQkMsR0FBL0IsQ0FBb0NrQyxNQUFwQyxDQUFQLENBQ0QsQ0FFRDs7OztLQUtBUyxJQUFLLENBQ0gsR0FBSUMsT0FBUSxLQUFLZixLQUFMLENBQVcsS0FBS0YsS0FBaEIsQ0FBdUIsa0NBQXZCLENBQTJELElBQTNELENBQVosQ0FDQSxHQUFJaUIsUUFBVSxJQUFkLENBQW9CLENBQ2xCQSxNQUFRLFdBQVIsQ0FDRCxDQUNELE1BQU9BLE1BQVAsQ0FDRCxDQTdIMEIsQyxnQkFBUmxCLE87Ozs7OztBQ0xyQixpQzs7Ozs7OztBQ0FBLDZDQUNBLHlDQUVBLEtBQU1tQixnQkFBaUIsR0FBSUMsaUNBQUosQ0FBbUJDLHVCQUFuQixDQUF2QixDQUVBQyxPQUFPQyxPQUFQLENBQWVDLE9BQWYsQ0FBeUJMLGVBQWVNLElBQWYsQ0FBb0JDLElBQXBCLENBQXlCUCxjQUF6QixDQUF6QixDOzs7Ozs7OzBGQ0xBLGlDLG9JQUdFQyxjLENBQUFBLGM7Ozs7Ozs7bVJDSEYseUNBQ0Esd0MsbUZBRUEsS0FBTSxDQUFFTyxjQUFGLEVBQXFCQyx3QkFBM0IsQ0FFQSxLQUFNQyxVQUFXLElBQU0sQ0FDckIsTUFBTyxJQUFJQyxRQUFKLENBQ0wsQ0FBQ0MsT0FBRCxDQUFVQyxNQUFWLEdBQXFCLENBQ25CQyxrQkFBTUosUUFBTixDQUFlSyxNQUFRSCxRQUFRRyxJQUFSLENBQXZCLEVBQ0QsQ0FISSxDQUFQLENBS0QsQ0FORCxDQVFBLEtBQU1kLGVBQU4sUUFBNkJlLDZCQUFlLENBQzFDakYsWUFBWW1FLFVBQVosQ0FBd0IsQ0FDdEIsUUFDQSxLQUFLQSxVQUFMLENBQWtCQSxVQUFsQixDQUVBLE1BQU8sS0FBUCxDQUNELENBRURJLEtBQUt4QixLQUFMLENBQVlDLE9BQVosQ0FBcUJwQyxRQUFyQixDQUErQixDQUM3QixLQUFLc0UsVUFBTCxDQUFnQlQsY0FBaEIsRUFFQSxNQUFPLE9BQU1GLElBQU4sQ0FBV3hCLEtBQVgsQ0FBa0JDLE9BQWxCLENBQTJCcEMsUUFBM0IsQ0FBUCxDQUNELENBRUQsS0FBTXVFLE9BQU4sQ0FBYXBDLEtBQWIsQ0FBb0JDLE9BQXBCLENBQTZCcEMsUUFBN0IsQ0FBdUMsQ0FDckMsS0FBTWlELFFBQVMsS0FBS3VCLE9BQUwsQ0FBYXZCLE1BQWIsRUFBZixDQUNBLEdBQUl3QixXQUFZLElBQWhCLENBRUEsT0FBUXhCLE1BQVIsRUFDRSxJQUFLLEtBQUwsQ0FDRXdCLFVBQVksS0FBTSxNQUFLQyxHQUFMLEVBQWxCLENBQ0EsTUFDRixJQUFLLE1BQUwsQ0FDRUQsVUFBWSxLQUFNLE1BQUtFLE1BQUwsRUFBbEIsQ0FDQSxNQUNGLElBQUssT0FBTCxDQUNFRixVQUFZLEtBQU0sTUFBS0csTUFBTCxFQUFsQixDQUNBLE1BQ0YsSUFBSyxRQUFMLENBQ0VILFVBQVksS0FBTSxNQUFLSSxNQUFMLEVBQWxCLENBQ0EsTUFDRixRQUNFQyxJQUFJQyxNQUFKLENBQVcsR0FBWCxFQUFnQjNELElBQWhCLENBQXFCLENBQUVhLE1BQU8sdUJBQVQsQ0FBckIsRUFDQSxNQWZKLENBa0JBLE1BQU93QyxVQUFQLENBQ0QsQ0FFRCxLQUFNQyxJQUFOLEVBQVksQ0FDVixLQUFNLENBQUVNLElBQUYsRUFBVyxLQUFLekIsVUFBdEIsQ0FDQSxLQUFNMEIsU0FBVSxLQUFLVCxPQUFMLENBQWF6QixLQUFiLEVBQWhCLENBQ0EsS0FBTW1DLE9BQVEsRUFBZCxDQUNBLEtBQU1DLFVBQVcsS0FBTXBCLFdBQXZCLENBRUEsK0JBQ0tvQixRQURMLEVBRUVDLFFBQVNELFNBQVNDLE9BQVQsQ0FBaUJDLE1BQWpCLENBQXdCSCxLQUF4QixDQUZYLEdBSUQsQ0FFRCxLQUFNSSxRQUFOLEVBQWdCLENBQ2QsS0FBTSxDQUFFTixJQUFGLEVBQVcsS0FBS3pCLFVBQXRCLENBQ0EsS0FBTSxDQUFFZ0MsRUFBRixFQUFTLEtBQUtmLE9BQUwsQ0FBYWhDLElBQWIsRUFBZixDQUNBLEtBQU1nRCxNQUFPLEtBQU1SLE1BQUtNLE9BQUwsQ0FBYUMsRUFBYixDQUFuQixDQUVBLE1BQU9DLEtBQVAsQ0FDRCxDQUVELEtBQU1iLE9BQU4sRUFBZSxDQUNiLEtBQU0sQ0FBRUssSUFBRixFQUFXLEtBQUt6QixVQUF0QixDQUNBLG9CQU9JLEtBQUtpQixPQUFMLENBQWE1QixJQUFiLEVBUEosQ0FBTSxDQUNKNkMsTUFESSxDQUVKQyxNQUZJLENBR0pDLE1BSEksQ0FJSkMsUUFKSSxDQUtKQyxPQUxJLENBQU4sZUFNS0wsSUFOTCx3R0FTQSxLQUFNTSxXQUFZLEtBQU1kLE1BQUtMLE1BQUwsQ0FBWWEsSUFBWixDQUF4QixDQUVBeEQsUUFBUStELEdBQVIsQ0FBWUQsU0FBWixFQUNBLFNBQ0E5RCxRQUFRK0QsR0FBUixDQUFZRCxVQUFVRSxlQUF0QixFQUVBLE1BQU9GLFVBQVAsQ0FDRCxDQUVELEtBQU1sQixPQUFOLEVBQWUsQ0FDYixLQUFNLENBQUVJLElBQUYsRUFBVyxLQUFLekIsVUFBdEIsQ0FDQSxLQUFNLENBQUVnQyxFQUFGLEVBQVMsS0FBS2YsT0FBTCxDQUFhaEMsSUFBYixFQUFmLENBQ0EsS0FBTWdELE1BQU8sS0FBS2hCLE9BQUwsQ0FBYTVCLElBQWIsRUFBYixDQUVBLEtBQU1xRCxXQUFZLEtBQU1qQixNQUFLSixNQUFMLENBQVlXLEVBQVosQ0FBZ0JDLElBQWhCLENBQXhCLENBRUEsR0FBSVMsU0FBSixDQUFlLENBQ2IsS0FBTUMsYUFBYyxLQUFNbEIsTUFBS00sT0FBTCxDQUFhQyxFQUFiLENBQTFCLENBRUEsTUFBT1csWUFBUCxDQUNELENBRUQsTUFBTyxFQUFQLENBQ0QsQ0FFRCxLQUFNckIsT0FBTixFQUFlLENBQ2IsS0FBTSxDQUFFRyxJQUFGLEVBQVcsS0FBS3pCLFVBQXRCLENBQ0EsS0FBTSxDQUFFZ0MsRUFBRixFQUFTLEtBQUtmLE9BQUwsQ0FBYWhDLElBQWIsRUFBZixDQUVBLEtBQU1nRCxNQUFPLEtBQU1SLE1BQUtILE1BQUwsQ0FBWVUsRUFBWixDQUFuQixDQUVBLE1BQU9DLEtBQVAsQ0FDRCxDQXRHeUMsQyxnQkF5RzdCbEMsYzs7Ozs7OzsyTkN0SE42QyxPLGtLQUNBQSxPLG1LQUNBQSxPLHlKQUNBQSxPLDRKQUNBQSxPOzs7Ozs7O3lEQ0ZULHVDLHFEQUNBLHFDLGlEQUNBLG9DLGtJQUVBLEtBQU0sQ0FDSjVHLG1CQURJLENBRUpLLDZCQUZJLENBR0pGLHFCQUhJLENBSUpDLGlCQUpJLEVBS0Z5RyxvQkFMSixDQU9BLEtBQU0vQixlQUFlLENBQ25CakYsYUFBYyxDQUNaLEtBQUtpSCxXQUFMLENBQW1CLEVBQW5CLENBQ0QsQ0FFRDFDLEtBQUt4QixLQUFMLENBQVlDLE9BQVosQ0FBcUJwQyxRQUFyQixDQUErQixDQUM3QixLQUFLd0UsT0FBTCxDQUFlLEdBQUl0QyxrQkFBSixDQUFZQyxLQUFaLENBQW1CQyxPQUFuQixDQUFmLENBQ0EsS0FBS2tFLFFBQUwsQ0FBZ0IsR0FBSXhHLG1CQUFKLENBQWFFLFFBQWIsQ0FBaEIsQ0FFQW9DLFFBQVFtRSw4QkFBUixDQUF5QyxLQUF6QyxDQUVBLEdBQUksQ0FDRixLQUFNQyxtQkFBb0IsS0FBS0MsY0FBTCxFQUExQixDQUNBLEtBQU1sQyxRQUFTLEtBQUtBLE1BQUwsQ0FBWVgsSUFBWixDQUFpQixJQUFqQixDQUFmLENBQ0EsTUFBTzRDLG1CQUNKRSxJQURJLENBQ0NuQyxNQURELEVBRUptQyxJQUZJLENBRUNKLFVBQVksS0FBS0EsUUFBTCxDQUFjbEYsSUFBZCxDQUFtQmtGLFFBQW5CLENBRmIsRUFHSkssS0FISSxDQUdFQyxHQUFLLENBQ1YsS0FBS0MsZUFBTCxDQUFxQkQsQ0FBckIsRUFDRCxDQUxJLENBQVAsQ0FNRCxDQUFDLE1BQU9BLENBQVAsQ0FBVSxDQUNWLEtBQUtDLGVBQUwsQ0FBcUJELENBQXJCLEVBQ0QsQ0FDRixDQUVEOzs7OztLQU1BckMsUUFBUyxDQUNQLEtBQU0sSUFBSXBGLE1BQUosQ0FBVSxzQ0FBVixDQUFOLENBQ0QsQ0FFRG1GLFdBQVd3QyxlQUFYLENBQTRCLENBQzFCLEtBQUtULFdBQUwsQ0FBaUJVLElBQWpCLENBQXNCRCxlQUF0QixFQUNELENBRURMLGdCQUFpQixDQUNmLEtBQU1PLFVBQVcsRUFBakIsQ0FDQSxJQUFLLEdBQUlsRyxHQUFJLENBQWIsQ0FBZ0JBLEVBQUksS0FBS3VGLFdBQUwsQ0FBaUJ0RixNQUFyQyxDQUE2Q0QsR0FBN0MsQ0FBa0QsQ0FDaEQsR0FBSWdELFlBQWEsS0FBS3VDLFdBQUwsQ0FBaUJ2RixDQUFqQixDQUFqQixDQUNBLEdBQUltRyxlQUFnQixHQUFJbkQsV0FBSixDQUFlLEtBQUtVLE9BQXBCLENBQTZCLEtBQUs4QixRQUFsQyxDQUFwQixDQUNBLEdBQUlyRCxRQUFTZ0UsY0FBY1IsY0FBZCxDQUE2QjdDLElBQTdCLENBQWtDcUQsYUFBbEMsQ0FBYixDQUNBRCxTQUFTRCxJQUFULENBQWM5RCxRQUFkLEVBQ0QsQ0FDRCxNQUFPZSxTQUFRQyxPQUFSLENBQWdCRCxRQUFRa0QsR0FBUixDQUFZRixRQUFaLENBQWhCLENBQVAsQ0FDRCxDQUVESCxnQkFBZ0JELENBQWhCLENBQW1CLENBQ2pCLEtBQU1PLGdCQUFpQixTQUFVUCxDQUFWLENBQWEsQ0FDbEMsS0FBTVEsZUFBZ0IsQ0FDcEI3SCxtQkFEb0IsQ0FFcEJHLHFCQUZvQixDQUdwQkMsaUJBSG9CLENBQXRCLENBS0EsSUFBSyxHQUFJbUIsR0FBSSxDQUFiLENBQWdCQSxFQUFJc0csY0FBY3JHLE1BQWxDLENBQTBDRCxHQUExQyxDQUErQyxDQUM3QyxHQUFJOEYsWUFBYVEsZUFBY3RHLENBQWQsQ0FBakIsQ0FBbUMsQ0FDakMsTUFBTyxLQUFQLENBQ0QsQ0FDRixDQUNELE1BQU8sTUFBUCxDQUNELENBWkQsQ0FjQSxHQUFJcUcsZUFBZVAsQ0FBZixDQUFKLENBQXVCLENBQ3JCLEtBQUtOLFFBQUwsQ0FBYzdFLElBQWQsQ0FDRSxDQUNFc0QsT0FBUTZCLEVBQUVwSCxVQURaLENBRUVDLEtBQU1tSCxFQUFFbkgsSUFGVixDQUdFSixRQUFTdUgsRUFBRXZILE9BSGIsQ0FJRUMsS0FBTXNILEVBQUV0SCxJQUpWLENBREYsQ0FPRXNILEVBQUVwSCxVQVBKLEVBU0QsQ0FWRCxJQVVPLElBQUlvSCxZQUFhaEgsOEJBQWpCLENBQWdELENBQ3JELEtBQUswRyxRQUFMLENBQWM5RyxVQUFkLENBQXlCb0gsRUFBRXBILFVBQTNCLEVBQXVDNEIsSUFBdkMsQ0FBNEN3RixFQUFFL0csSUFBOUMsRUFDRCxDQUZNLElBRUEsQ0FDTCxLQUFLeUcsUUFBTCxDQUFjekUsT0FBZCxDQUFzQitFLENBQXRCLEVBQ0QsQ0FDRixDQWhGa0IsQyxnQkFtRk52QyxjOzs7Ozs7O3lEQzlGZixpQyx5Q0FFQSxrQyw0SEFFQWdELGVBQUtDLFNBQUwsQ0FBZSxDQUNiQyxVQUFXL0UsZUFBS2dGLElBQUwsQ0FBVUMsU0FBVixDQUFxQixrQkFBckIsQ0FERSxDQUViQyxTQUFVQyxNQUZHLENBR2JDLFlBQWEsS0FIQSxDQUliQyxjQUFlLElBSkYsQ0FBZixFQU9BOzs7R0FJQSxLQUFNQyxlQUFlLENBQ25CMUksWUFBWW9GLE9BQVosQ0FBcUI4QixRQUFyQixDQUErQixDQUM3QixLQUFLOUIsT0FBTCxDQUFlQSxPQUFmLENBQ0EsS0FBSzhCLFFBQUwsQ0FBZ0JBLFFBQWhCLENBQ0QsQ0FKa0IsQ0FPckIsS0FBTXlCLG1CQUFOLFFBQWlDRCxlQUFlLENBQzlDckIsZ0JBQWlCLENBQ2YsR0FBSWxHLFNBQVUsS0FBS2lFLE9BQUwsQ0FBYWpFLE9BQWIsRUFBZCxDQUNBLEtBQUtpRSxPQUFMLENBQWF3RCxRQUFiLENBQXdCLElBQXhCLENBQ0EsR0FBSXpILFFBQVEsaUJBQVIsQ0FBSixDQUFnQyxDQUM5QixLQUFLaUUsT0FBTCxDQUFhd0QsUUFBYixDQUF3QnpILFFBQVEsaUJBQVIsRUFBMkIwSCxTQUEzQixDQUFxQyxDQUFyQyxDQUF3QyxDQUF4QyxDQUF4QixDQUNBWixlQUFLYSxTQUFMLENBQWUsS0FBSzFELE9BQUwsQ0FBYXdELFFBQTVCLEVBQ0QsQ0FDRCxNQUFPaEUsU0FBUUMsT0FBUixFQUFQLENBQ0QsQ0FUNkMsQ0FZaEQsS0FBTUosZUFBTixRQUE2QmlFLGVBQWUsQ0FDMUNyQixnQkFBaUIsQ0FDZixLQUFLSCxRQUFMLENBQWMvRixPQUFkLENBQXNCLENBQ3BCLDhCQUErQixHQURYLENBRXBCLG1DQUFvQyxJQUZoQixDQUF0QixFQUlBLE1BQU95RCxTQUFRQyxPQUFSLEVBQVAsQ0FDRCxDQVB5QyxDLGdCQVU3QixDQUNiOEQsa0JBRGEsQ0FFYmxFLGNBRmEsQzs7Ozs7O0FDOUNmLGlDOzs7Ozs7O2lGQ0FBLG1DLHNJQUdFTSxLLENBQUFBLGU7Ozs7Ozs7eURDSEYsS0FBTWdFLE9BQVFDLG1CQUFPQSxDQUFDLEVBQVIsQ0FBZCxDQUVBLEtBQU1DLGFBQWUsVUFBWSxDQUMvQixHQUFJQyxTQUFVLDZCQUFkLENBRUEsUUFBUzlELFFBQVQsQ0FBaUIrRCxHQUFqQixDQUFzQkMsRUFBdEIsQ0FBMEIsQ0FDeEIsTUFBT0wsT0FBTUksR0FBTixFQUNKN0IsSUFESSxDQUNDLFNBQVU1QixHQUFWLENBQWUsQ0FDbkIsTUFBT0EsS0FBSTJELElBQUosRUFBUCxDQUNELENBSEksRUFJSi9CLElBSkksQ0FJQyxTQUFVdEMsSUFBVixDQUFnQixDQUNwQixHQUFJLE1BQU9vRSxHQUFQLEdBQWMsVUFBbEIsQ0FBOEIsQ0FDNUJBLEdBQUdwRSxJQUFILEVBQ0QsQ0FFRCxNQUFPQSxLQUFQLENBQ0QsQ0FWSSxFQVdKdUMsS0FYSSxDQVdFLFNBQVU3RSxHQUFWLENBQWUsQ0FDcEJFLFFBQVErRCxHQUFSLENBQVlqRSxHQUFaLEVBQ0QsQ0FiSSxDQUFQLENBY0QsQ0FFRCxRQUFTNEcsYUFBVCxDQUFzQkYsRUFBdEIsQ0FBMEIsQ0FDeEIsTUFBT2hFLFNBQVE4RCxPQUFSLENBQWlCRSxFQUFqQixDQUFQLENBQ0QsQ0FFRCxRQUFTRyx5QkFBVCxDQUFrQ25HLElBQWxDLENBQXdDLENBQ3RDLE1BQU8sVUFBVStDLEVBQVYsQ0FBY2lELEVBQWQsQ0FBa0IsQ0FDdkIsTUFBT2hFLFNBQVE4RCxRQUFVOUYsSUFBVixDQUFpQixHQUFqQixDQUF1QitDLEVBQXZCLENBQTRCLEdBQXBDLENBQXlDaUQsRUFBekMsQ0FBUCxDQUNELENBRkQsQ0FHRCxDQUVELFFBQVNJLHVCQUFULENBQWdDcEcsSUFBaEMsQ0FBc0MsQ0FDcEMsTUFBTyxXQUFZLENBRWpCLEdBQUlxRyxhQUFjekksU0FBbEIsQ0FDQSxHQUFJb0ksSUFBS3BJLFNBQVQsQ0FFQSxHQUFJMEksVUFBVS9ILE1BQVYsQ0FBbUIsQ0FBdkIsQ0FBMEIsQ0FDeEI4SCxZQUFjQyxVQUFVLENBQVYsQ0FBZCxDQUNBTixHQUFLTSxVQUFVLENBQVYsQ0FBTCxDQUNELENBSEQsSUFHTyxJQUFJQSxVQUFVLENBQVYsQ0FBSixDQUFrQixDQUN2QjtBQUNBLEdBQUksTUFBT0EsV0FBVSxDQUFWLENBQVAsR0FBd0IsVUFBNUIsQ0FBd0MsQ0FDdENOLEdBQUtNLFVBQVUsQ0FBVixDQUFMLENBQ0FELFlBQWMsSUFBZCxDQUNELENBSEQsSUFHTyxDQUNMTCxHQUFLLElBQUwsQ0FDQUssWUFBY0MsVUFBVSxDQUFWLENBQWQsQ0FDRCxDQUNGLENBRUQsR0FBSUQsV0FBSixDQUFpQixDQUNmLEdBQUlFLGNBQWUsR0FBSUMsZ0JBQUosRUFBbkIsQ0FDQSxJQUFLLEdBQUl4SSxJQUFULEdBQWdCSSxRQUFPQyxJQUFQLENBQVlnSSxXQUFaLENBQWhCLENBQTBDLENBQ3hDLEdBQUlwSSxPQUFRb0ksWUFBWXJJLEdBQVosQ0FBWixDQUNBdUksYUFBYUUsTUFBYixDQUFvQnpJLEdBQXBCLENBQXlCQyxLQUF6QixFQUNELENBQ0QsTUFBTytELFNBQVE4RCxRQUFVOUYsSUFBVixDQUFpQixJQUFqQixDQUF3QnVHLGFBQWFHLFFBQWIsRUFBaEMsQ0FBeURWLEVBQXpELENBQVAsQ0FDRCxDQUVELE1BQU9oRSxTQUFROEQsUUFBVTlGLElBQVYsQ0FBaUIsR0FBekIsQ0FBOEJnRyxFQUE5QixDQUFQLENBRUQsQ0E5QkQsQ0ErQkQsQ0FFRCxNQUFPLENBQ0xFLGFBQWNBLFlBRFQsQ0FFTFMsVUFBV1IseUJBQXlCLFFBQXpCLENBRk4sQ0FHTFMsVUFBV1IsdUJBQXVCLFFBQXZCLENBSE4sQ0FJTFMsUUFBU1YseUJBQXlCLE9BQXpCLENBSkosQ0FLTDVFLFNBQVU2RSx1QkFBdUIsT0FBdkIsQ0FMTCxDQU1MVSxVQUFXWCx5QkFBeUIsU0FBekIsQ0FOTixDQU9MWSxXQUFZWCx1QkFBdUIsU0FBdkIsQ0FQUCxDQVFMWSxXQUFZYix5QkFBeUIsU0FBekIsQ0FSUCxDQVNMYyxjQUFlYix1QkFBdUIsU0FBdkIsQ0FUVixDQVVMYyxZQUFhZix5QkFBeUIsV0FBekIsQ0FWUixDQVdMZ0IsYUFBY2YsdUJBQXVCLFdBQXZCLENBWFQsQ0FZTGdCLFdBQVlqQix5QkFBeUIsVUFBekIsQ0FaUCxDQWFMa0IsWUFBYWpCLHVCQUF1QixVQUF2QixDQWJSLENBQVAsQ0FlRCxDQS9FbUIsRUFBcEIsQyxnQkFpRmVQLFc7Ozs7OztBQ25GZix1Qzs7Ozs7OztzRkNBQSx3QyxxREFDQSx1QyxzSUFFQSxLQUFNOUUsWUFBYSxHQUFJdUcscUJBQUosQ0FBZUMsbUJBQWYsQ0FBbkIsQyxRQUdFeEcsVSxDQUFBQSxVOzs7Ozs7O3lEQ05GLCtDQUVBLEtBQU11RyxXQUFXLENBQ2YxSyxZQUFZNEssU0FBWixDQUF1QixDQUNyQixLQUFLQSxTQUFMLENBQWlCQSxTQUFqQixDQUVBLEtBQUtoRixJQUFMLENBQVksR0FBSWlGLGtDQUFKLENBQW1CRCxTQUFuQixDQUFaLENBQ0QsQ0FMYyxDLGdCQVNGRixVOzs7Ozs7OzBGQ1hmLGtDLG9JQUdFRyxjLENBQUFBLGM7Ozs7Ozs7eURDSEYseUMsMElBRUEsS0FBTUEsZUFBTixRQUE2QkMsc0JBQVksQ0FDdkM5SyxZQUFZNEssU0FBWixDQUF1QixDQUNyQixRQUVBLEtBQUtBLFNBQUwsQ0FBaUJBLFNBQWpCLENBRUEsTUFBTyxLQUFQLENBQ0QsQ0FFRCxLQUFNckYsT0FBTixDQUFhYSxJQUFiLENBQW1CLENBQ2pCLEdBQUksQ0FDRixLQUFNLENBQUVSLElBQUYsRUFBVyxLQUFLZ0YsU0FBdEIsQ0FDQSxLQUFNbEUsV0FBWSxLQUFNZCxNQUFLTCxNQUFMLENBQVlhLElBQVosQ0FBeEIsQ0FFQSxNQUFPTSxVQUFQLENBQ0QsQ0FBQyxNQUFPYyxDQUFQLENBQVUsQ0FDVjVFLFFBQVErRCxHQUFSLENBQVlhLENBQVosRUFDRCxDQUNGLENBRUQsS0FBTWhDLE9BQU4sQ0FBYVcsRUFBYixDQUFpQkMsSUFBakIsQ0FBdUIsQ0FDckIsR0FBSSxDQUNGLEtBQU0sQ0FBRVIsSUFBRixFQUFXLEtBQUtnRixTQUF0QixDQUNBLEtBQU1sRSxXQUFZLEtBQU1kLE1BQUtKLE1BQUwsQ0FBWVksSUFBWixDQUFrQixDQUFFMkUsTUFBTyxDQUFFNUUsRUFBRixDQUFULENBQWxCLENBQXhCLENBRUEsTUFBT08sVUFBUCxDQUNELENBQUMsTUFBT2MsQ0FBUCxDQUFVLENBQ1Y1RSxRQUFRK0QsR0FBUixDQUFZYSxDQUFaLEVBQ0QsQ0FDRixDQUVELEtBQU1sQyxJQUFOLENBQVVPLE9BQVYsQ0FBbUIsQ0FDakIsR0FBSSxDQUNGLEtBQU0sQ0FBRUQsSUFBRixFQUFXLEtBQUtnRixTQUF0QixDQUNBLEtBQU14RSxNQUFPLEtBQU1SLE1BQUtvRixPQUFMLENBQWFuRixPQUFiLENBQW5CLENBRUEsTUFBT08sS0FBUCxDQUNELENBQUMsTUFBT29CLENBQVAsQ0FBVSxDQUNWNUUsUUFBUStELEdBQVIsQ0FBWWEsQ0FBWixFQUNELENBQ0YsQ0FFRCxLQUFNdEIsUUFBTixDQUFjQyxFQUFkLENBQWtCLENBQ2hCLEdBQUksQ0FDRixLQUFNLENBQUVQLElBQUYsRUFBVyxLQUFLZ0YsU0FBdEIsQ0FDQSxLQUFNeEUsTUFBTyxLQUFNUixNQUFLcUYsT0FBTCxDQUFhLENBQUVGLE1BQU8sQ0FBRTVFLEVBQUYsQ0FBVCxDQUFiLENBQW5CLENBRUEsTUFBT0MsS0FBUCxDQUNELENBQUMsTUFBT29CLENBQVAsQ0FBVSxDQUNWNUUsUUFBUStELEdBQVIsQ0FBWWEsQ0FBWixFQUNELENBQ0YsQ0FFRCxLQUFNL0IsT0FBTixDQUFhVSxFQUFiLENBQWlCLENBQ2YsS0FBTSxDQUFFUCxJQUFGLEVBQVcsS0FBS2dGLFNBQXRCLENBQ0EsS0FBTXhFLE1BQU8sS0FBTVIsTUFBS3FGLE9BQUwsQ0FBYSxDQUFFRixNQUFPLENBQUU1RSxFQUFGLENBQVQsQ0FBYixDQUFuQixDQUVBLEtBQU1QLE1BQUtzRixPQUFMLENBQWEsQ0FBRUgsTUFBTyxDQUFFNUUsRUFBRixDQUFULENBQWIsQ0FBTixDQUVBLE1BQU9DLEtBQVAsQ0FDRCxDQTVEc0MsQyxnQkErRDFCeUUsYzs7Ozs7Ozt5RENqRWYsS0FBTUMsWUFBWSxDQUNoQjlLLGFBQWMsQ0FDWixHQUFJLEtBQUt1RixNQUFMLEdBQWdCdkUsU0FBcEIsQ0FBK0IsS0FBTSxJQUFJakIsTUFBSixDQUFVLGlDQUFWLENBQU4sQ0FDL0IsR0FBSSxLQUFLeUYsTUFBTCxHQUFnQnhFLFNBQXBCLENBQStCLEtBQU0sSUFBSWpCLE1BQUosQ0FBVSxnQ0FBVixDQUFOLENBQy9CLEdBQUksS0FBS3VGLEdBQUwsR0FBYXRFLFNBQWpCLENBQTRCLEtBQU0sSUFBSWpCLE1BQUosQ0FBVSw0QkFBVixDQUFOLENBQzVCLEdBQUksS0FBS21HLE9BQUwsR0FBaUJsRixTQUFyQixDQUFnQyxLQUFNLElBQUlqQixNQUFKLENBQVUsaUNBQVYsQ0FBTixDQUNoQyxHQUFJLEtBQUswRixNQUFMLEdBQWdCekUsU0FBcEIsQ0FBK0IsS0FBTSxJQUFJakIsTUFBSixDQUFVLGdDQUFWLENBQU4sQ0FDaEMsQ0FQZSxDLGdCQVVIK0ssVzs7Ozs7Ozt5RENWZiwyQyw4SUFFQSxLQUFNSyxLQUFNQyxRQUFRRCxHQUFSLENBQVlFLFFBQVosRUFBd0IsYUFBcEMsQ0FDQSxLQUFNQyxRQUFTdEMsbUJBQU9BLENBQUMsRUFBUixFQUFpQ21DLEdBQWpDLENBQWYsQ0FFQSxLQUFNSSxXQUFZLEdBQUlDLHdCQUFKLENBQXNCRixNQUF0QixDQUFsQixDQUNBLEtBQU1HLElBQUtGLFVBQVVHLGFBQVYsRUFBWCxDLGdCQUVlRCxFOzs7Ozs7O0FDTmYsS0FBTUUsSUFBSzNDLG1CQUFPQSxDQUFDLEVBQVIsQ0FBWCxDQUNBLEtBQU01RixNQUFPNEYsbUJBQU9BLENBQUMsQ0FBUixDQUFiLENBQ0EsS0FBTTRDLFdBQVk1QyxtQkFBT0EsQ0FBQyxFQUFSLENBQWxCLENBQ0EsS0FBTTZDLFVBQVd6SSxLQUFLeUksUUFBTCxDQUFjQyxVQUFkLENBQWpCLENBQ0EsS0FBTSxDQUFFQyxTQUFGLEVBQWdCL0MsbUJBQU9BLENBQUMsRUFBUixDQUF0QixDQUVBLEdBQUlnRCxXQUFZLElBQWhCLENBQ0EsS0FBTUMsWUFBYTdJLEtBQUt5QixPQUFMLENBQWF3RCxTQUFiLENBQXdCLFVBQXhCLENBQW5CLENBRUEsS0FBTW1ELGtCQUFrQixDQUN0QnhMLFlBQVlzTCxPQUFTLEVBQXJCLENBQXlCLENBQ3ZCLEtBQUtZLFNBQUwsQ0FBaUJaLE9BQU9ZLFNBQVAsRUFBb0JILFVBQVVJLFNBQS9DLENBQ0EsS0FBS0MsUUFBTCxDQUFnQmQsT0FBT2MsUUFBdkIsQ0FDQSxLQUFLQyxRQUFMLENBQWdCZixPQUFPZSxRQUF2QixDQUNBLEtBQUtDLFFBQUwsQ0FBZ0JoQixPQUFPZ0IsUUFBdkIsQ0FDQSxLQUFLQyxJQUFMLENBQVlqQixPQUFPaUIsSUFBbkIsQ0FDQSxLQUFLQyxJQUFMLENBQVlsQixPQUFPa0IsSUFBbkIsQ0FDQSxLQUFLQyxPQUFMLENBQWVuQixPQUFPbUIsT0FBdEIsQ0FDQSxLQUFLQyxTQUFMLENBQWlCLEVBQWpCLENBQ0EsS0FBS3ZFLFNBQUwsQ0FBaUJtRCxPQUFPbkQsU0FBUCxFQUFvQjhELFVBQXJDLENBQ0EsS0FBS1UsZ0JBQUwsQ0FBd0JyQixPQUFPcUIsZ0JBQS9CLENBRUEsS0FBS0MsVUFBTCxDQUFrQixJQUFsQixDQUVBLEdBQUksQ0FBQ1osU0FBTCxDQUFnQixDQUNkQSxVQUFZLElBQVosQ0FDRCxDQUNELE1BQU9BLFVBQVAsQ0FDRCxDQUVETixlQUFnQixDQUNkLE9BQVEsS0FBS1EsU0FBYixFQUNFLElBQUtILFdBQVVJLFNBQWYsQ0FDRSxLQUFLUyxVQUFMLENBQWtCLEtBQUtBLFVBQUwsRUFBbUIsS0FBS0MsWUFBTCxFQUFyQyxDQUNBLE1BQ0YsUUFDRSxLQUFLRCxVQUFMLENBQWtCLEtBQUtBLFVBQUwsRUFBbUIsS0FBS0MsWUFBTCxFQUFyQyxDQUNBLE1BTkosQ0FTQSxNQUFPLE1BQUtELFVBQVosQ0FDRCxDQUVEQyxjQUFlLENBQ2IsS0FBTXBCLElBQUssRUFBWCxDQUVBLEtBQU0sQ0FBRVcsUUFBRixDQUFZQyxRQUFaLENBQXNCQyxRQUF0QixDQUFnQ25FLFNBQWhDLENBQTJDb0UsSUFBM0MsQ0FBaURDLElBQWpELENBQXVEQyxPQUF2RCxDQUFnRUUsZ0JBQWhFLEVBQXFGLElBQTNGLENBQ0EsS0FBTXJCLFFBQVMsQ0FBRWMsUUFBRixDQUFZQyxRQUFaLENBQXNCQyxRQUF0QixDQUFnQ0MsSUFBaEMsQ0FBc0NDLElBQXRDLENBQTRDQyxPQUE1QyxDQUFmLENBRUEsR0FBSSxDQUNGLEdBQUlFLGdCQUFKLENBQXNCLENBQ3BCLEtBQUtELFNBQUwsQ0FBaUIsR0FBSWQsVUFBSixDQUFjUixRQUFRRCxHQUFSLENBQVl3QixnQkFBWixDQUFkLENBQTZDckIsTUFBN0MsQ0FBakIsQ0FDRCxDQUZELElBRU8sQ0FDTCxLQUFLb0IsU0FBTCxDQUFpQixHQUFJZCxVQUFKLENBQWNRLFFBQWQsQ0FBd0JDLFFBQXhCLENBQWtDQyxRQUFsQyxDQUE0Q2hCLE1BQTVDLENBQWpCLENBQ0QsQ0FFREssR0FDR21CLFdBREgsQ0FDZTNFLFNBRGYsRUFFRzRFLE1BRkgsQ0FFVUMsTUFBUSxDQUNkLE1BQVFBLE1BQUtDLE9BQUwsQ0FBYSxHQUFiLElBQXNCLENBQXZCLEVBQThCRCxPQUFTbkIsUUFBdkMsRUFBcURtQixLQUFLRSxLQUFMLENBQVcsQ0FBQyxDQUFaLElBQW1CLEtBQS9FLENBQ0QsQ0FKSCxFQUtHQyxPQUxILENBS1dILE1BQVEsQ0FDZixLQUFNSSxPQUFRLEtBQUtWLFNBQUwsQ0FBZSxRQUFmLEVBQXlCdEosS0FBS2dGLElBQUwsQ0FBVUQsU0FBVixDQUFxQjZFLElBQXJCLENBQXpCLENBQWQsQ0FDQXZCLEdBQUcyQixNQUFNL00sSUFBVCxFQUFpQitNLEtBQWpCLENBQ0QsQ0FSSCxFQVVBNUwsT0FBT0MsSUFBUCxDQUFZZ0ssRUFBWixFQUFnQjBCLE9BQWhCLENBQXdCRSxXQUFhLENBQ25DLEdBQUk1QixHQUFHNEIsU0FBSCxFQUFjQyxTQUFsQixDQUE2QixDQUMzQjdCLEdBQUc0QixTQUFILEVBQWNDLFNBQWQsQ0FBd0I3QixFQUF4QixFQUNELENBQ0YsQ0FKRCxFQU1BQSxHQUFHaUIsU0FBSCxDQUFlLEtBQUtBLFNBQXBCLENBQ0FqQixHQUFHRyxTQUFILENBQWVBLFNBQWYsQ0FDRCxDQUFDLE1BQU9sSixHQUFQLENBQVksQ0FDWitJLEdBQUc4QixVQUFILENBQWdCN0ssR0FBaEIsQ0FDQStJLEdBQUd4TCxPQUFILENBQWEsa0RBQWIsQ0FFQTJDLFFBQVFDLEtBQVIsQ0FBY0gsR0FBZCxFQUNELENBRUQsTUFBTytJLEdBQVAsQ0FDRCxDQXpFcUIsQ0E0RXhCckgsT0FBT0MsT0FBUCxDQUFpQm1ILGlCQUFqQixDOzs7Ozs7QUN2RkEsK0I7Ozs7OztBQ0FBLHNDOzs7Ozs7O0FDQUEsS0FBTU8sV0FBWSxDQUNoQkksVUFBVyxXQURLLENBQWxCLENBSUEvSCxPQUFPQyxPQUFQLENBQWlCLENBQ2YwSCxTQURlLENBQWpCLEM7Ozs7Ozs7QUNKQSxLQUFNeUIsTUFBT3hFLG1CQUFPQSxDQUFDLEVBQVIsQ0FBYixDQUNBLEtBQU1tQyxLQUFNQyxRQUFRRCxHQUFSLENBQVlFLFFBQVosRUFBd0IsYUFBcEMsQ0FDQSxLQUFNb0MsT0FBUUQsS0FBSyxVQUFMLENBQWlCLENBQUVyQyxHQUFGLENBQWpCLENBQWQsQ0FFQS9HLE9BQU9DLE9BQVAsQ0FBaUIsQ0FDZnFKLFlBQWEsQ0FDWHJCLFNBQVVvQixNQUFNRSxXQURMLENBRVhyQixTQUFVbUIsTUFBTUcsV0FGTCxDQUdYeEIsU0FBVXFCLE1BQU1JLFdBSEwsQ0FJWHRCLEtBQU1rQixNQUFNSyxPQUpELENBS1hyQixRQUFTZ0IsTUFBTU0sVUFMSixDQURFLENBUWZDLEtBQU0sQ0FDSjNCLFNBQVVvQixNQUFNRSxXQURaLENBRUpyQixTQUFVbUIsTUFBTUcsV0FGWixDQUdKeEIsU0FBVXFCLE1BQU1JLFdBSFosQ0FJSnRCLEtBQU1rQixNQUFNSyxPQUpSLENBS0pyQixRQUFTZ0IsTUFBTU0sVUFMWCxDQVJTLENBZWZFLFdBQVksQ0FDVjVCLFNBQVVvQixNQUFNRSxXQUROLENBRVZyQixTQUFVbUIsTUFBTUcsV0FGTixDQUdWeEIsU0FBVXFCLE1BQU1JLFdBSE4sQ0FJVnRCLEtBQU1rQixNQUFNSyxPQUpGLENBS1ZyQixRQUFTZ0IsTUFBTU0sVUFMTCxDQWZHLENBQWpCLEM7Ozs7OztBQ0pBLGlDIiwiZmlsZSI6ImZ1bmN0aW9ucy9maWxtLmpzIiwic291cmNlc0NvbnRlbnQiOlsiIFx0Ly8gVGhlIG1vZHVsZSBjYWNoZVxuIFx0dmFyIGluc3RhbGxlZE1vZHVsZXMgPSB7fTtcblxuIFx0Ly8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbiBcdGZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcblxuIFx0XHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcbiBcdFx0aWYoaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0pIHtcbiBcdFx0XHRyZXR1cm4gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0uZXhwb3J0cztcbiBcdFx0fVxuIFx0XHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuIFx0XHR2YXIgbW9kdWxlID0gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0gPSB7XG4gXHRcdFx0aTogbW9kdWxlSWQsXG4gXHRcdFx0bDogZmFsc2UsXG4gXHRcdFx0ZXhwb3J0czoge31cbiBcdFx0fTtcblxuIFx0XHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cbiBcdFx0bW9kdWxlc1ttb2R1bGVJZF0uY2FsbChtb2R1bGUuZXhwb3J0cywgbW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cbiBcdFx0Ly8gRmxhZyB0aGUgbW9kdWxlIGFzIGxvYWRlZFxuIFx0XHRtb2R1bGUubCA9IHRydWU7XG5cbiBcdFx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcbiBcdFx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xuIFx0fVxuXG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlcyBvYmplY3QgKF9fd2VicGFja19tb2R1bGVzX18pXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm0gPSBtb2R1bGVzO1xuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZSBjYWNoZVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5jID0gaW5zdGFsbGVkTW9kdWxlcztcblxuIFx0Ly8gZGVmaW5lIGdldHRlciBmdW5jdGlvbiBmb3IgaGFybW9ueSBleHBvcnRzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQgPSBmdW5jdGlvbihleHBvcnRzLCBuYW1lLCBnZXR0ZXIpIHtcbiBcdFx0aWYoIV9fd2VicGFja19yZXF1aXJlX18ubyhleHBvcnRzLCBuYW1lKSkge1xuIFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBuYW1lLCB7XG4gXHRcdFx0XHRjb25maWd1cmFibGU6IGZhbHNlLFxuIFx0XHRcdFx0ZW51bWVyYWJsZTogdHJ1ZSxcbiBcdFx0XHRcdGdldDogZ2V0dGVyXG4gXHRcdFx0fSk7XG4gXHRcdH1cbiBcdH07XG5cbiBcdC8vIGdldERlZmF1bHRFeHBvcnQgZnVuY3Rpb24gZm9yIGNvbXBhdGliaWxpdHkgd2l0aCBub24taGFybW9ueSBtb2R1bGVzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm4gPSBmdW5jdGlvbihtb2R1bGUpIHtcbiBcdFx0dmFyIGdldHRlciA9IG1vZHVsZSAmJiBtb2R1bGUuX19lc01vZHVsZSA/XG4gXHRcdFx0ZnVuY3Rpb24gZ2V0RGVmYXVsdCgpIHsgcmV0dXJuIG1vZHVsZVsnZGVmYXVsdCddOyB9IDpcbiBcdFx0XHRmdW5jdGlvbiBnZXRNb2R1bGVFeHBvcnRzKCkgeyByZXR1cm4gbW9kdWxlOyB9O1xuIFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQoZ2V0dGVyLCAnYScsIGdldHRlcik7XG4gXHRcdHJldHVybiBnZXR0ZXI7XG4gXHR9O1xuXG4gXHQvLyBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGxcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubyA9IGZ1bmN0aW9uKG9iamVjdCwgcHJvcGVydHkpIHsgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmplY3QsIHByb3BlcnR5KTsgfTtcblxuIFx0Ly8gX193ZWJwYWNrX3B1YmxpY19wYXRoX19cbiBcdF9fd2VicGFja19yZXF1aXJlX18ucCA9IFwiXCI7XG5cbiBcdC8vIExvYWQgZW50cnkgbW9kdWxlIGFuZCByZXR1cm4gZXhwb3J0c1xuIFx0cmV0dXJuIF9fd2VicGFja19yZXF1aXJlX18oX193ZWJwYWNrX3JlcXVpcmVfXy5zID0gNik7XG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gd2VicGFjay9ib290c3RyYXAgNzM0NTk1NTRmMGQ2NmQ4MTYxNTgiLCJtb2R1bGUuZXhwb3J0cyA9IHJlcXVpcmUoXCJiYWJlbC1ydW50aW1lL2hlbHBlcnMvb2JqZWN0V2l0aG91dFByb3BlcnRpZXNcIik7XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gZXh0ZXJuYWwgXCJiYWJlbC1ydW50aW1lL2hlbHBlcnMvb2JqZWN0V2l0aG91dFByb3BlcnRpZXNcIlxuLy8gbW9kdWxlIGlkID0gMFxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJtb2R1bGUuZXhwb3J0cyA9IHJlcXVpcmUoXCJiYWJlbC1ydW50aW1lL2hlbHBlcnMvZXh0ZW5kc1wiKTtcblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyBleHRlcm5hbCBcImJhYmVsLXJ1bnRpbWUvaGVscGVycy9leHRlbmRzXCJcbi8vIG1vZHVsZSBpZCA9IDFcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiJ3VzZSBzdHJpY3QnXG5cbmNsYXNzIEJhc2VFeGNlcHRpb24gZXh0ZW5kcyBFcnJvciB7XG4gIGNvbnN0cnVjdG9yKG1lc3NhZ2UsIGNvZGUpIHtcbiAgICBzdXBlcihtZXNzYWdlKVxuICAgIHRoaXMuY29kZSA9IHR5cGVvZiBjb2RlICE9PSAndW5kZWZpbmVkJyA/IGNvZGUgOiAwXG4gIH1cbn1cblxuZXhwb3J0IGNsYXNzIEJhZFJlcXVlc3RFeGNlcHRpb24gZXh0ZW5kcyBCYXNlRXhjZXB0aW9uIHtcbiAgY29uc3RydWN0b3IobWVzc2FnZSwgY29kZSkge1xuICAgIHN1cGVyKG1lc3NhZ2UsIGNvZGUpXG4gICAgdGhpcy5zdGF0dXNDb2RlID0gNDAwXG4gICAgdGhpcy5uYW1lID0gJ0JhZCBSZXF1ZXN0J1xuICB9XG59XG5cbmV4cG9ydCBjbGFzcyBVbkF1dGhvcml6ZWRFeGNlcHRpb24gZXh0ZW5kcyBCYXNlRXhjZXB0aW9uIHtcbiAgY29uc3RydWN0b3IobWVzc2FnZSwgY29kZSkge1xuICAgIHN1cGVyKG1lc3NhZ2UsIGNvZGUpXG4gICAgdGhpcy5zdGF0dXNDb2RlID0gNDAxXG4gICAgdGhpcy5uYW1lID0gJ1VuYXV0aG9yaXplZCdcbiAgfVxufVxuXG5leHBvcnQgY2xhc3MgTm90Rm91bmRFeGNlcHRpb24gZXh0ZW5kcyBFcnJvciB7XG4gIGNvbnN0cnVjdG9yKG1lc3NhZ2UsIGNvZGUpIHtcbiAgICBzdXBlcihtZXNzYWdlLCBjb2RlKVxuICAgIHRoaXMuc3RhdHVzQ29kZSA9IDQwNFxuICAgIHRoaXMubmFtZSA9ICdOb3QgRm91bmQnXG4gIH1cbn1cblxuZXhwb3J0IGNsYXNzIERhdGFWYWxpZGF0aW9uRmFpbGVkRXhjZXB0aW9uIGV4dGVuZHMgRXJyb3Ige1xuICBjb25zdHJ1Y3RvcihtZXNzYWdlLCBib2R5LCBjb2RlKSB7XG4gICAgc3VwZXIobWVzc2FnZSwgY29kZSlcbiAgICB0aGlzLnN0YXR1c0NvZGUgPSA0MjJcbiAgICB0aGlzLm5hbWUgPSAnRGF0YSBWYWxpZGF0aW9uIGZhaWxlZCdcbiAgICB0aGlzLmJvZHkgPSBib2R5XG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQge1xuICBCYWRSZXF1ZXN0RXhjZXB0aW9uLFxuICBVbkF1dGhvcml6ZWRFeGNlcHRpb24sXG4gIE5vdEZvdW5kRXhjZXB0aW9uLFxuICBEYXRhVmFsaWRhdGlvbkZhaWxlZEV4Y2VwdGlvblxufVxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL2hlbHBlcnMvRXhjZXB0aW9ucy5qcyIsIi8qKlxuICogQ2xhc3MgdG8gaGFuZGxlIHJlc3BvbnNlcyBiYWNrIHRvIExhbWJkYVxuICpcbiAqIEB0eXBlIHtSZXNwb25zZX1cbiAqL1xuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUmVzcG9uc2Uge1xuICAvKipcbiAgICogUGFzcyB0aGUgTGFtYmRhIGZ1bmN0aW9uIHRoYXQgY29tZXMgaW4gdGhlIGhhbmRsZXJcbiAgICpcbiAgICogQHBhcmFtIGxhbWJkYUNhbGxiYWNrXG4gICAqIEBwdWJsaWNcbiAgICovXG4gIGNvbnN0cnVjdG9yKGxhbWJkYUNhbGxiYWNrKSB7XG4gICAgdGhpcy5jYWxsYmFjayA9IGxhbWJkYUNhbGxiYWNrXG4gICAgdGhpcy5fc3RhdHVzQ29kZSA9IDIwMFxuICAgIHRoaXMuX2hlYWRlcnMgPSB7fVxuICAgIHRoaXMuX29wdGlvbnMgPSB7fVxuICB9XG5cbiAgLyoqXG4gICAqIENoYW5nZSB0aGUgc3RhdHVzIGNvZGVcbiAgICpcbiAgICogQHBhcmFtIHN0YXR1c0NvZGVcbiAgICogQHJldHVybnMge1Jlc3BvbnNlfVxuICAgKi9cbiAgc3RhdHVzQ29kZShzdGF0dXNDb2RlKSB7XG4gICAgaWYgKHN0YXR1c0NvZGUgPT09IHVuZGVmaW5lZCkgcmV0dXJuIHRoaXMuX3N0YXR1c0NvZGVcbiAgICB0aGlzLl9zdGF0dXNDb2RlID0gcGFyc2VJbnQoc3RhdHVzQ29kZSlcbiAgICBpZiAoaXNOYU4odGhpcy5fc3RhdHVzQ29kZSkpIHRoaXMuX3N0YXR1c0NvZGUgPSA1MDBcbiAgICBpZiAodGhpcy5fc3RhdHVzQ29kZSA8IDIwMCB8fCB0aGlzLl9zdGF0dXNDb2RlID4gNTk5KSB0aGlzLl9zdGF0dXNDb2RlID0gNTAwXG4gICAgcmV0dXJuIHRoaXNcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgYWxsIGhlYWRlcnMsIHJldHJpZXZlIGEgaGVhZGVyIG9yIGFkZCBvbmUvbWFueSBoZWFkZXJzXG4gICAqXG4gICAqIEBwYXJhbSBrZXlcbiAgICogQHBhcmFtIHZhbHVlXG4gICAqIEByZXR1cm5zIHsqfVxuICAgKi9cbiAgaGVhZGVycyhrZXksIHZhbHVlKSB7XG4gICAgLy8gSWYgY2FsbGVkIGVtcHR5IGl0IHJldHVybnMgYWxsIHRoZSBoZWFkZXJzXG4gICAgaWYgKGtleSA9PT0gdW5kZWZpbmVkICYmIHZhbHVlID09PSB1bmRlZmluZWQpIHtcbiAgICAgIHJldHVybiB0aGlzLl9oZWFkZXJzXG4gICAgfVxuXG4gICAgLy8gU2V0IG9yIHJldHVybiB0aGUga2V5IHdoZW4gaXQgaXMgYSBzdHJpbmdcbiAgICBpZiAodHlwZW9mIGtleSA9PT0gJ3N0cmluZycpIHtcbiAgICAgIGlmICh2YWx1ZSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9oZWFkZXJzW2tleS50b0xvd2VyQ2FzZSgpXSB8fCBudWxsXG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLl9oZWFkZXJzW2tleS50b0xvd2VyQ2FzZSgpXSA9IHZhbHVlXG4gICAgICAgIHJldHVybiB0aGlzXG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gQWRkIG11bHRpcGxlIGhlYWRlcnNcbiAgICBsZXQgaGVhZGVyTmFtZXMgPSBPYmplY3Qua2V5cyhrZXkpXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBoZWFkZXJOYW1lcy5sZW5ndGg7IGkrKykge1xuICAgICAgbGV0IGhlYWRlck5hbWUgPSBoZWFkZXJOYW1lc1tpXS50b0xvd2VyQ2FzZSgpXG4gICAgICB0aGlzLl9oZWFkZXJzW2hlYWRlck5hbWVdID0ga2V5W2hlYWRlck5hbWVzW2ldXVxuICAgIH1cblxuICAgIHJldHVybiB0aGlzXG4gIH1cblxuICBvcHRpb25zKGtleSwgdmFsdWUpIHtcbiAgICAvLyBJZiBjYWxsZWQgZW1wdHkgaXQgcmV0dXJucyBhbGwgdGhlIG9wdGlvbnNcbiAgICBpZiAoa2V5ID09PSB1bmRlZmluZWQgJiYgdmFsdWUgPT09IHVuZGVmaW5lZCkge1xuICAgICAgcmV0dXJuIHRoaXMuX29wdGlvbnNcbiAgICB9XG5cbiAgICAvLyBTZXQgb3IgcmV0dXJuIHRoZSBrZXkgd2hlbiBpdCBpcyBhIHN0cmluZ1xuICAgIGlmICh0eXBlb2Yga2V5ID09PSAnc3RyaW5nJykge1xuICAgICAgaWYgKHZhbHVlID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX29wdGlvbnNba2V5XSB8fCBudWxsXG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLl9vcHRpb25zW2tleV0gPSB2YWx1ZVxuICAgICAgICByZXR1cm4gdGhpc1xuICAgICAgfVxuICAgIH1cblxuICAgIC8vIEFkZCBtdWx0aXBsZSBvcHRpb25zXG4gICAgbGV0IG9wdGlvbnNOYW1lcyA9IE9iamVjdC5rZXlzKGtleSlcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IG9wdGlvbnNOYW1lcy5sZW5ndGg7IGkrKykge1xuICAgICAgbGV0IG9wdGlvbk5hbWUgPSBvcHRpb25zTmFtZXNbaV1cbiAgICAgIHRoaXMuX29wdGlvbnNbb3B0aW9uTmFtZV0gPSBrZXlbb3B0aW9uc05hbWVzW2ldXVxuICAgIH1cblxuICAgIHJldHVybiB0aGlzXG4gIH1cblxuICAvKipcbiAgICogU2VuZCB0aGUgYm9keSBhcyBhIHJlc3BvbnNlXG4gICAqXG4gICAqIEBwYXJhbSBib2R5XG4gICAqIEBwdWJsaWNcbiAgICovXG4gIHNlbmQoYm9keSkge1xuICAgIGNvbnN0IHsgcmF3LCAuLi5yZXN0IH0gPSB0aGlzLl9vcHRpb25zXG5cbiAgICBpZiAoYm9keSA9PT0gdW5kZWZpbmVkKSBib2R5ID0ge31cbiAgICBpZiAoIXJhdykge1xuICAgICAgaWYgKHR5cGVvZiBib2R5ICE9PSAnb2JqZWN0JykgYm9keSA9IHsgbWVzc2FnZTogYm9keSB9XG4gICAgICBib2R5ID0gSlNPTi5zdHJpbmdpZnkoYm9keSB8fCB7fSlcbiAgICB9XG5cbiAgICB0aGlzLmNhbGxiYWNrKG51bGwsIHtcbiAgICAgIHN0YXR1c0NvZGU6IHRoaXMuX3N0YXR1c0NvZGUsXG4gICAgICBib2R5LFxuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcbiAgICAgIC4uLnJlc3RcbiAgICB9KVxuICB9XG5cbiAgLyoqXG4gICAqIEZhaWwgd2l0aCBhIDRYWCBzdGF0dXNDb2RlXG4gICAqXG4gICAqIEBwYXJhbSBib2R5XG4gICAqIEBwYXJhbSBzdGF0dXNDb2RlXG4gICAqIEBwdWJsaWNcbiAgICovXG4gIGZhaWwoYm9keSwgc3RhdHVzQ29kZSkge1xuICAgIGlmIChib2R5ID09PSB1bmRlZmluZWQpIGJvZHkgPSB7fVxuICAgIGlmICh0eXBlb2YgYm9keSAhPT0gJ29iamVjdCcpIGJvZHkgPSB7IG1lc3NhZ2U6IGJvZHkgfVxuICAgIHRoaXMuc3RhdHVzQ29kZShNYXRoLmFicyhwYXJzZUludChzdGF0dXNDb2RlIHx8IDQwMCkpICUgMTAwICsgNDAwKS5zZW5kKFxuICAgICAgT2JqZWN0LmFzc2lnbihcbiAgICAgICAge1xuICAgICAgICAgIG1lc3NhZ2U6ICdTb21ldGhpbmcgd2VudCB3cm9uZydcbiAgICAgICAgfSxcbiAgICAgICAgYm9keSB8fCB7fVxuICAgICAgKVxuICAgIClcbiAgfVxuXG4gIC8qKlxuICAgKiBGYWlsIHdpdGggYSA1WFggc3RhdHVzQ29kZVxuICAgKlxuICAgKiBAcGFyYW0gZXJyXG4gICAqIEBwYXJhbSBzdGF0dXNDb2RlXG4gICAqIEBwdWJsaWNcbiAgICovXG4gIGZhaWw1MDAoZXJyLCBzdGF0dXNDb2RlKSB7XG4gICAgaWYgKGVyciA9PT0gdW5kZWZpbmVkKSBlcnIgPSBuZXcgRXJyb3IoXCJDYWxsZWQgJ2ZhaWw1MDAnIHdpdGhvdXQgZXJyb3JcIilcbiAgICBpZiAoIWVycikgZXJyID0geyBtZXNzYWdlOiAnSW50ZXJuYWwgc2VydmVyIGVycm9yJyB9XG5cbiAgICAvLyBMb2cgdGhlIGVycm9yIHRvIGlkZW50aWZ5IGxhdGVyXG4gICAgaWYgKGVyci5zdGFjaykge1xuICAgICAgY29uc29sZS5lcnJvcihlcnIuc3RhY2spXG4gICAgfSBlbHNlIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoZXJyKVxuICAgIH1cblxuICAgIC8vIFNlbmQgYSByZXNwb25zZSBpbiBhIHByb3BlciBmb3JtYXQgdG8gdGhlIGN1c3RvbWVyXG4gICAgdGhpcy5zdGF0dXNDb2RlKE1hdGguYWJzKHBhcnNlSW50KHN0YXR1c0NvZGUgfHwgNTAwKSkgJSAxMDAgKyA1MDApLnNlbmQoe1xuICAgICAgbWVzc2FnZTogJ0ludGVybmFsIHNlcnZlciBlcnJvcidcbiAgICB9KVxuICB9XG59XG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vaGVscGVycy9SZXNwb25zZS5qcyIsIi8qKlxuICogQSBSZXF1ZXN0IHR5cGUgdG8gZWFzaWx5IHNlbmQgcmVxdWVzdHMgdG8gc2VydmljZXNcbiAqXG4gKiBAdHlwZSB7UmVxdWVzdH1cbiAqL1xuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUmVxdWVzdCB7XG4gIC8qKlxuICAgKiBDcmVhdGUgdGhlIHJlcXVlc3QgYnkgcGFzc2luZyB0aGUgZXZlbnQgYW5kIGNvbnRleHQgcmVjZWl2ZWRcbiAgICogaW4gdGhlIGxhbWJkYSBoYW5kbGVyLiBUaGlzIGNsYXNzIGhhcyBtZXRob2RzIHRvIHJldHJpZXZlIGluZm9cbiAgICogZnJvbSB0aG9zZSBwYXJhbWV0ZXJzXG4gICAqXG4gICAqIEBwYXJhbSBldmVudFxuICAgKiBAcGFyYW0gY29udGV4dFxuICAgKiBAcHVibGljXG4gICAqL1xuICBjb25zdHJ1Y3RvcihldmVudCwgY29udGV4dCkge1xuICAgIHRoaXMuZXZlbnQgPSBldmVudFxuICAgIHRoaXMuY29udGV4dCA9IGNvbnRleHRcbiAgfVxuXG4gIC8qKlxuICAgKiBFeHRyYWN0IGEgdmFsdWUgZnJvbSBhbiBvYmplY3QgdXNpbmcgZG90IG5vdGF0aW9uLiBJdCBjYW5cbiAgICogZ2V0IG5lc3RlZCBvYmplY3RzXG4gICAqXG4gICAqIEBwYXJhbSBvYmpcbiAgICogQHBhcmFtIGtleVxuICAgKiBAcGFyYW0gZGVmYXVsdFZhbHVlXG4gICAqIEByZXR1cm5zIHsqfVxuICAgKiBAcHVibGljXG4gICAqL1xuICBfX2dldChvYmosIGtleSwgZGVmYXVsdFZhbHVlKSB7XG4gICAgaWYgKCFvYmopIHJldHVybiBkZWZhdWx0VmFsdWUgPT09IHVuZGVmaW5lZCA/IG51bGwgOiBkZWZhdWx0VmFsdWVcbiAgICBjb25zdCBwYXRoID0ga2V5LnNwbGl0KCcuJylcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHBhdGgubGVuZ3RoOyBpKyspIHtcbiAgICAgIGlmICh0eXBlb2Ygb2JqID09PSAnb2JqZWN0Jykge1xuICAgICAgICBpZiAob2JqW3BhdGhbaV1dKSB7XG4gICAgICAgICAgb2JqID0gb2JqW3BhdGhbaV1dXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgb2JqID0gZGVmYXVsdFZhbHVlID09PSB1bmRlZmluZWQgPyBudWxsIDogZGVmYXVsdFZhbHVlXG4gICAgICAgICAgYnJlYWtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIGRlZmF1bHRWYWx1ZSA9PT0gdW5kZWZpbmVkID8gbnVsbCA6IGRlZmF1bHRWYWx1ZVxuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gb2JqXG4gIH1cblxuICAvKipcbiAgICogR2V0IGEgdmFsdWUgZnJvbSBhIHBhdGggdmFyaWFibGVcbiAgICpcbiAgICogQHBhcmFtIGtleVxuICAgKiBAcGFyYW0gZGVmVmFsXG4gICAqIEByZXR1cm5zIHsqfVxuICAgKiBAcHVibGljXG4gICAqL1xuICBwYXRoKGtleSwgZGVmVmFsKSB7XG4gICAgaWYgKGtleSA9PT0gdW5kZWZpbmVkKSByZXR1cm4gdGhpcy5ldmVudC5wYXRoUGFyYW1ldGVycyB8fCB7fVxuICAgIHJldHVybiB0aGlzLl9fZ2V0KHRoaXMuZXZlbnQucGF0aFBhcmFtZXRlcnMsIGtleSwgZGVmVmFsKVxuICB9XG5cbiAgLyoqXG4gICAqIEdldCBhIHZhbHVlIGZyb20gdGhlIGJvZHkgb2YgdGhlIHJlcXVlc3RcbiAgICpcbiAgICogQHBhcmFtIGtleVxuICAgKiBAcGFyYW0gZGVmVmFsXG4gICAqIEByZXR1cm5zIHsqfVxuICAgKiBAcHVibGljXG4gICAqL1xuICBwb3N0KGtleSwgZGVmVmFsKSB7XG4gICAgLy8gTWFrZSBzdXJlIHRoYXQgYm9keSBpcyBub3QgYSBKU09OIHN0cmluZyBidXQgYW4gb2JqZWN0XG4gICAgLy8gYmVjYXVzZSBBV1Mgc2VuZHMgaXQgYXMgYSBKU09OIHN0cmluZ1xuICAgIGlmICh0aGlzLmV2ZW50LmJvZHkgJiYgdHlwZW9mIHRoaXMuZXZlbnQuYm9keSA9PT0gJ3N0cmluZycpIHtcbiAgICAgIHRyeSB7XG4gICAgICAgIHRoaXMuZXZlbnQuYm9keSA9IEpTT04ucGFyc2UodGhpcy5ldmVudC5ib2R5KVxuICAgICAgfSBjYXRjaCAoZXgpIHtcbiAgICAgICAgdGhpcy5ldmVudC5ib2R5ID0ge31cbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAoa2V5ID09PSB1bmRlZmluZWQpIHJldHVybiB0aGlzLmV2ZW50LmJvZHkgfHwge31cbiAgICByZXR1cm4gdGhpcy5fX2dldCh0aGlzLmV2ZW50LmJvZHksIGtleSwgZGVmVmFsKVxuICB9XG5cbiAgLyoqXG4gICAqIEdldCBhIHZhbHVlIGZyb20gdGhlIHF1ZXJ5IHBhcmFtZXRlcnNcbiAgICpcbiAgICogQHBhcmFtIGtleVxuICAgKiBAcGFyYW0gZGVmVmFsXG4gICAqIEByZXR1cm5zIHsqfVxuICAgKiBAcHVibGljXG4gICAqL1xuICBxdWVyeShrZXksIGRlZlZhbCkge1xuICAgIGlmIChrZXkgPT09IHVuZGVmaW5lZCkgcmV0dXJuIHRoaXMuZXZlbnQucXVlcnlTdHJpbmdQYXJhbWV0ZXJzIHx8IHt9XG4gICAgcmV0dXJuIHRoaXMuX19nZXQodGhpcy5ldmVudC5xdWVyeVN0cmluZ1BhcmFtZXRlcnMsIGtleSwgZGVmVmFsKVxuICB9XG5cbiAgLyoqXG4gICAgICogR2V0IGEgdmFsdWUgZnJvbSB0aGUgbWV0aG9kXG4gICAgICpcbiAgICAgKiBAcmV0dXJucyB7Kn1cbiAgICAgKiBAcHVibGljXG4gICAgICovXG4gIG1ldGhvZCgpIHtcbiAgICByZXR1cm4gdGhpcy5ldmVudC5odHRwTWV0aG9kIHx8ICcnXG4gIH1cblxuICAvKipcbiAgICogR2V0IGEgdmFsdWUgZnJvbSB0aGUgaGVhZGVyc1xuICAgKlxuICAgKiBAcGFyYW0ga2V5XG4gICAqIEBwYXJhbSBkZWZWYWxcbiAgICogQHJldHVybnMgeyp9XG4gICAqL1xuICBoZWFkZXJzKGtleSwgZGVmVmFsKSB7XG4gICAgaWYgKGtleSA9PT0gdW5kZWZpbmVkKSByZXR1cm4gdGhpcy5ldmVudC5oZWFkZXJzIHx8IHt9XG4gICAgcmV0dXJuIHRoaXMuX19nZXQodGhpcy5ldmVudC5oZWFkZXJzLCBrZXksIGRlZlZhbClcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm4gdGhlIElQIEFkZHJlc3Mgb2YgdGhlIHJlcXVlc3QgZnJvbSB0aGUgQVdTIGV2ZW50XG4gICAqXG4gICAqIEByZXR1cm5zIHsqfVxuICAgKi9cbiAgaXAoKSB7XG4gICAgbGV0IGlwVmFsID0gdGhpcy5fX2dldCh0aGlzLmV2ZW50LCAncmVxdWVzdENvbnRleHQuaWRlbnRpdHkuc291cmNlSXAnLCBudWxsKVxuICAgIGlmIChpcFZhbCA9PT0gJzo6Jykge1xuICAgICAgaXBWYWwgPSAnMTI3LjAuMC4xJ1xuICAgIH1cbiAgICByZXR1cm4gaXBWYWxcbiAgfVxufVxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL2hlbHBlcnMvUmVxdWVzdC5qcyIsIm1vZHVsZS5leHBvcnRzID0gcmVxdWlyZShcInBhdGhcIik7XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gZXh0ZXJuYWwgXCJwYXRoXCJcbi8vIG1vZHVsZSBpZCA9IDVcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiaW1wb3J0IHsgRmlsbUNvbnRyb2xsZXIgfSBmcm9tICdzd2FwaS1jb250cm9sbGVycydcbmltcG9ydCB7IHVuaXRPZldvcmsgfSBmcm9tICcuLi9wZXJzaXN0ZW5jZSdcblxuY29uc3QgZmlsbUNvbnRyb2xsZXIgPSBuZXcgRmlsbUNvbnRyb2xsZXIodW5pdE9mV29yaylcblxubW9kdWxlLmV4cG9ydHMuaGFuZGxlciA9IGZpbG1Db250cm9sbGVyLmluaXQuYmluZChmaWxtQ29udHJvbGxlcilcblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL2Z1bmN0aW9ucy9maWxtLmpzIiwiaW1wb3J0IEZpbG1Db250cm9sbGVyIGZyb20gJy4vRmlsbSdcblxuZXhwb3J0IHtcbiAgRmlsbUNvbnRyb2xsZXJcbn1cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9jb250cm9sbGVycy9pbmRleC5qcyIsImltcG9ydCB7IEJhc2VDb250cm9sbGVyLCBNaWRkbGV3YXJlIH0gZnJvbSAnc3dhcGktaGVscGVycydcbmltcG9ydCB7IFN3YXBpIH0gZnJvbSAnc3dhcGktdXRpbHMnXG5cbmNvbnN0IHsgQ29yc01pZGRsZXdhcmUgfSA9IE1pZGRsZXdhcmVcblxuY29uc3QgZ2V0RmlsbXMgPSAoKSA9PiB7XG4gIHJldHVybiBuZXcgUHJvbWlzZShcbiAgICAocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICBTd2FwaS5nZXRGaWxtcyhkYXRhID0+IHJlc29sdmUoZGF0YSkpXG4gICAgfVxuICApXG59XG5cbmNsYXNzIEZpbG1Db250cm9sbGVyIGV4dGVuZHMgQmFzZUNvbnRyb2xsZXIge1xuICBjb25zdHJ1Y3Rvcih1bml0T2ZXb3JrKSB7XG4gICAgc3VwZXIoKVxuICAgIHRoaXMudW5pdE9mV29yayA9IHVuaXRPZldvcmtcblxuICAgIHJldHVybiB0aGlzXG4gIH1cblxuICBpbml0KGV2ZW50LCBjb250ZXh0LCBjYWxsYmFjaykge1xuICAgIHRoaXMubWlkZGxld2FyZShDb3JzTWlkZGxld2FyZSlcblxuICAgIHJldHVybiBzdXBlci5pbml0KGV2ZW50LCBjb250ZXh0LCBjYWxsYmFjaylcbiAgfVxuXG4gIGFzeW5jIGhhbmRsZShldmVudCwgY29udGV4dCwgY2FsbGJhY2spIHtcbiAgICBjb25zdCBtZXRob2QgPSB0aGlzLnJlcXVlc3QubWV0aG9kKClcbiAgICB2YXIgb3BlcmF0aW9uID0gbnVsbFxuXG4gICAgc3dpdGNoIChtZXRob2QpIHtcbiAgICAgIGNhc2UgJ0dFVCc6XG4gICAgICAgIG9wZXJhdGlvbiA9IGF3YWl0IHRoaXMuZ2V0KClcbiAgICAgICAgYnJlYWtcbiAgICAgIGNhc2UgJ1BPU1QnOlxuICAgICAgICBvcGVyYXRpb24gPSBhd2FpdCB0aGlzLmNyZWF0ZSgpXG4gICAgICAgIGJyZWFrXG4gICAgICBjYXNlICdQQVRDSCc6XG4gICAgICAgIG9wZXJhdGlvbiA9IGF3YWl0IHRoaXMudXBkYXRlKClcbiAgICAgICAgYnJlYWtcbiAgICAgIGNhc2UgJ0RFTEVURSc6XG4gICAgICAgIG9wZXJhdGlvbiA9IGF3YWl0IHRoaXMucmVtb3ZlKClcbiAgICAgICAgYnJlYWtcbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIHJlcy5zdGF0dXMoNTAwKS5zZW5kKHsgZXJyb3I6ICdNZXRob2Qgbm90IHN1cHBvcnRlZCEnIH0pXG4gICAgICAgIGJyZWFrXG4gICAgfVxuXG4gICAgcmV0dXJuIG9wZXJhdGlvblxuICB9XG5cbiAgYXN5bmMgZ2V0KCkge1xuICAgIGNvbnN0IHsgRmlsbSB9ID0gdGhpcy51bml0T2ZXb3JrXG4gICAgY29uc3QgZmlsdGVycyA9IHRoaXMucmVxdWVzdC5xdWVyeSgpXG4gICAgY29uc3QgZmlsbXMgPSBbXVxuICAgIGNvbnN0IGZpbG1zQXBpID0gYXdhaXQgZ2V0RmlsbXMoKVxuXG4gICAgcmV0dXJuIHtcbiAgICAgIC4uLmZpbG1zQXBpLFxuICAgICAgcmVzdWx0czogZmlsbXNBcGkucmVzdWx0cy5jb25jYXQoZmlsbXMpXG4gICAgfVxuICB9XG5cbiAgYXN5bmMgZ2V0QnlJZCgpIHtcbiAgICBjb25zdCB7IEZpbG0gfSA9IHRoaXMudW5pdE9mV29ya1xuICAgIGNvbnN0IHsgaWQgfSA9IHRoaXMucmVxdWVzdC5wYXRoKClcbiAgICBjb25zdCBmaWxtID0gYXdhaXQgRmlsbS5nZXRCeUlkKGlkKVxuXG4gICAgcmV0dXJuIGZpbG1cbiAgfVxuXG4gIGFzeW5jIGNyZWF0ZSgpIHtcbiAgICBjb25zdCB7IEZpbG0gfSA9IHRoaXMudW5pdE9mV29ya1xuICAgIGNvbnN0IHtcbiAgICAgIHBlb3BsZSxcbiAgICAgIHBsYW5ldCxcbiAgICAgIHNwZWNpZSxcbiAgICAgIHN0YXJzaGlwLFxuICAgICAgdmVoaWNsZSxcbiAgICAgIC4uLmZpbG1cbiAgICB9ID0gdGhpcy5yZXF1ZXN0LnBvc3QoKVxuXG4gICAgY29uc3QgZmlsbVNhdmVkID0gYXdhaXQgRmlsbS5jcmVhdGUoZmlsbSlcblxuICAgIGNvbnNvbGUubG9nKGZpbG1TYXZlZClcbiAgICBkZWJ1Z2dlclxuICAgIGNvbnNvbGUubG9nKGZpbG1TYXZlZC5hZGRGaWxtUmVsYXRpb24pXG5cbiAgICByZXR1cm4gZmlsbVNhdmVkXG4gIH1cblxuICBhc3luYyB1cGRhdGUoKSB7XG4gICAgY29uc3QgeyBGaWxtIH0gPSB0aGlzLnVuaXRPZldvcmtcbiAgICBjb25zdCB7IGlkIH0gPSB0aGlzLnJlcXVlc3QucGF0aCgpXG4gICAgY29uc3QgZmlsbSA9IHRoaXMucmVxdWVzdC5wb3N0KClcblxuICAgIGNvbnN0IHJvd1VwZGF0ZSA9IGF3YWl0IEZpbG0udXBkYXRlKGlkLCBmaWxtKVxuXG4gICAgaWYgKHJvd1VwZGF0ZSkge1xuICAgICAgY29uc3QgZmlsbVVwZGF0ZWQgPSBhd2FpdCBGaWxtLmdldEJ5SWQoaWQpXG5cbiAgICAgIHJldHVybiBmaWxtVXBkYXRlZFxuICAgIH1cblxuICAgIHJldHVybiB7fVxuICB9XG5cbiAgYXN5bmMgcmVtb3ZlKCkge1xuICAgIGNvbnN0IHsgRmlsbSB9ID0gdGhpcy51bml0T2ZXb3JrXG4gICAgY29uc3QgeyBpZCB9ID0gdGhpcy5yZXF1ZXN0LnBhdGgoKVxuXG4gICAgY29uc3QgZmlsbSA9IGF3YWl0IEZpbG0ucmVtb3ZlKGlkKVxuXG4gICAgcmV0dXJuIGZpbG1cbiAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBGaWxtQ29udHJvbGxlclxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL2NvbnRyb2xsZXJzL0ZpbG0uanMiLCJleHBvcnQgeyBkZWZhdWx0IGFzIEJhc2VDb250cm9sbGVyIH0gZnJvbSAnLi9Db250cm9sbGVyJ1xuZXhwb3J0IHsgZGVmYXVsdCBhcyBFeGNlcHRpb25zIH0gZnJvbSAnLi9FeGNlcHRpb25zJ1xuZXhwb3J0IHsgZGVmYXVsdCBhcyBNaWRkbGV3YXJlIH0gZnJvbSAnLi9NaWRkbGV3YXJlJ1xuZXhwb3J0IHsgZGVmYXVsdCBhcyBSZXF1ZXN0IH0gZnJvbSAnLi9SZXF1ZXN0J1xuZXhwb3J0IHsgZGVmYXVsdCBhcyBSZXNwb25zZSB9IGZyb20gJy4vUmVzcG9uc2UnXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vaGVscGVycy9pbmRleC5qcyIsIid1c2Ugc3RyaWN0J1xuXG5pbXBvcnQgRXhjZXB0aW9ucyBmcm9tICcuL0V4Y2VwdGlvbnMnXG5pbXBvcnQgUmVzcG9uc2UgZnJvbSAnLi9SZXNwb25zZSdcbmltcG9ydCBSZXF1ZXN0IGZyb20gJy4vUmVxdWVzdCdcblxuY29uc3Qge1xuICBCYWRSZXF1ZXN0RXhjZXB0aW9uLFxuICBEYXRhVmFsaWRhdGlvbkZhaWxlZEV4Y2VwdGlvbixcbiAgVW5BdXRob3JpemVkRXhjZXB0aW9uLFxuICBOb3RGb3VuZEV4Y2VwdGlvblxufSA9IEV4Y2VwdGlvbnNcblxuY2xhc3MgQmFzZUNvbnRyb2xsZXIge1xuICBjb25zdHJ1Y3RvcigpIHtcbiAgICB0aGlzLm1pZGRsZXdhcmVzID0gW11cbiAgfVxuXG4gIGluaXQoZXZlbnQsIGNvbnRleHQsIGNhbGxiYWNrKSB7XG4gICAgdGhpcy5yZXF1ZXN0ID0gbmV3IFJlcXVlc3QoZXZlbnQsIGNvbnRleHQpXG4gICAgdGhpcy5yZXNwb25zZSA9IG5ldyBSZXNwb25zZShjYWxsYmFjaylcblxuICAgIGNvbnRleHQuY2FsbGJhY2tXYWl0c0ZvckVtcHR5RXZlbnRMb29wID0gZmFsc2VcblxuICAgIHRyeSB7XG4gICAgICBjb25zdCBtaWRkbGV3YXJlUHJvbWlzZSA9IHRoaXMucHJvY2Vzc1JlcXVlc3QoKVxuICAgICAgY29uc3QgaGFuZGxlID0gdGhpcy5oYW5kbGUuYmluZCh0aGlzKVxuICAgICAgcmV0dXJuIG1pZGRsZXdhcmVQcm9taXNlXG4gICAgICAgIC50aGVuKGhhbmRsZSlcbiAgICAgICAgLnRoZW4ocmVzcG9uc2UgPT4gdGhpcy5yZXNwb25zZS5zZW5kKHJlc3BvbnNlKSlcbiAgICAgICAgLmNhdGNoKGUgPT4ge1xuICAgICAgICAgIHRoaXMuaGFuZGxlRXhjZXB0aW9uKGUpXG4gICAgICAgIH0pXG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgdGhpcy5oYW5kbGVFeGNlcHRpb24oZSlcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogWW91IE1VU1QgaW1wbGVtZW50IHRoaXMgbWV0aG9kLlxuICAgKiBJdCBpcyBzdXBwb3NlZCB0byBiZSB1c2VkIHRvIGhhbmRsZSB0aGUgbG9naWMgaW5cbiAgICogeW91ciBjb250cm9sbGVyLiBTaG91bGQgcmV0dXJucyBhIHByb21pc2Ugb3IgcmFpc2VcbiAgICogYW4gRXhjZXB0aW9uIGZyb20gY29yZS9FeGNlcHRpb25zXG4gICAqL1xuICBoYW5kbGUoKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdZb3UgbXVzdCBpbXBsZW1lbnQgdGhlIG1ldGhvZCBoYW5kbGUnKVxuICB9XG5cbiAgbWlkZGxld2FyZShtaWRkbGV3YXJlQ2xhc3MpIHtcbiAgICB0aGlzLm1pZGRsZXdhcmVzLnB1c2gobWlkZGxld2FyZUNsYXNzKVxuICB9XG5cbiAgcHJvY2Vzc1JlcXVlc3QoKSB7XG4gICAgY29uc3QgcHJvbWlzZXMgPSBbXVxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5taWRkbGV3YXJlcy5sZW5ndGg7IGkrKykge1xuICAgICAgbGV0IE1pZGRsZXdhcmUgPSB0aGlzLm1pZGRsZXdhcmVzW2ldXG4gICAgICBsZXQgbWlkZGxld2FyZU9iaiA9IG5ldyBNaWRkbGV3YXJlKHRoaXMucmVxdWVzdCwgdGhpcy5yZXNwb25zZSlcbiAgICAgIGxldCBtZXRob2QgPSBtaWRkbGV3YXJlT2JqLnByb2Nlc3NSZXF1ZXN0LmJpbmQobWlkZGxld2FyZU9iailcbiAgICAgIHByb21pc2VzLnB1c2gobWV0aG9kKCkpXG4gICAgfVxuICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoUHJvbWlzZS5hbGwocHJvbWlzZXMpKVxuICB9XG5cbiAgaGFuZGxlRXhjZXB0aW9uKGUpIHtcbiAgICBjb25zdCBpc1NpbWlsYXJFcnJvciA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICBjb25zdCBzaW1pbGFyRXJyb3JzID0gW1xuICAgICAgICBCYWRSZXF1ZXN0RXhjZXB0aW9uLFxuICAgICAgICBVbkF1dGhvcml6ZWRFeGNlcHRpb24sXG4gICAgICAgIE5vdEZvdW5kRXhjZXB0aW9uXG4gICAgICBdXG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHNpbWlsYXJFcnJvcnMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgaWYgKGUgaW5zdGFuY2VvZiBzaW1pbGFyRXJyb3JzW2ldKSB7XG4gICAgICAgICAgcmV0dXJuIHRydWVcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgcmV0dXJuIGZhbHNlXG4gICAgfVxuXG4gICAgaWYgKGlzU2ltaWxhckVycm9yKGUpKSB7XG4gICAgICB0aGlzLnJlc3BvbnNlLmZhaWwoXG4gICAgICAgIHtcbiAgICAgICAgICBzdGF0dXM6IGUuc3RhdHVzQ29kZSxcbiAgICAgICAgICBuYW1lOiBlLm5hbWUsXG4gICAgICAgICAgbWVzc2FnZTogZS5tZXNzYWdlLFxuICAgICAgICAgIGNvZGU6IGUuY29kZVxuICAgICAgICB9LFxuICAgICAgICBlLnN0YXR1c0NvZGVcbiAgICAgIClcbiAgICB9IGVsc2UgaWYgKGUgaW5zdGFuY2VvZiBEYXRhVmFsaWRhdGlvbkZhaWxlZEV4Y2VwdGlvbikge1xuICAgICAgdGhpcy5yZXNwb25zZS5zdGF0dXNDb2RlKGUuc3RhdHVzQ29kZSkuc2VuZChlLmJvZHkpXG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMucmVzcG9uc2UuZmFpbDUwMChlKVxuICAgIH1cbiAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBCYXNlQ29udHJvbGxlclxuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vaGVscGVycy9Db250cm9sbGVyLmpzIiwiJ3VzZSBzdHJpY3QnXG5cbmltcG9ydCBwYXRoIGZyb20gJ3BhdGgnXG5cbmltcG9ydCBpMThuIGZyb20gJ2kxOG4nXG5cbmkxOG4uY29uZmlndXJlKHtcbiAgZGlyZWN0b3J5OiBwYXRoLmpvaW4oX19kaXJuYW1lLCAnLi9yZXNvdXJjZXMvbGFuZycpLFxuICByZWdpc3RlcjogZ2xvYmFsLFxuICB1cGRhdGVGaWxlczogZmFsc2UsXG4gIGRlZmF1bHRMb2NhbGU6ICdlbidcbn0pXG5cbi8qKlxuICogRXZlcnkgbWlkZGxld2FyZSBjYW4gZGVmaW5lIHByb2Nlc3NSZXF1ZXN0LlxuICogVGhhdCBtZXRob2QgbXVzdCByZXR1cm4gYSBQcm9taXNlXG4gKi9cbmNsYXNzIEJhc2VNaWRkbGV3YXJlIHtcbiAgY29uc3RydWN0b3IocmVxdWVzdCwgcmVzcG9uc2UpIHtcbiAgICB0aGlzLnJlcXVlc3QgPSByZXF1ZXN0XG4gICAgdGhpcy5yZXNwb25zZSA9IHJlc3BvbnNlXG4gIH1cbn1cblxuY2xhc3MgTGFuZ3VhZ2VNaWRkbGV3YXJlIGV4dGVuZHMgQmFzZU1pZGRsZXdhcmUge1xuICBwcm9jZXNzUmVxdWVzdCgpIHtcbiAgICBsZXQgaGVhZGVycyA9IHRoaXMucmVxdWVzdC5oZWFkZXJzKClcbiAgICB0aGlzLnJlcXVlc3QubGFuZ3VhZ2UgPSAnZW4nXG4gICAgaWYgKGhlYWRlcnNbJ0FjY2VwdC1MYW5ndWFnZSddKSB7XG4gICAgICB0aGlzLnJlcXVlc3QubGFuZ3VhZ2UgPSBoZWFkZXJzWydBY2NlcHQtTGFuZ3VhZ2UnXS5zdWJzdHJpbmcoMCwgMilcbiAgICAgIGkxOG4uc2V0TG9jYWxlKHRoaXMucmVxdWVzdC5sYW5ndWFnZSlcbiAgICB9XG4gICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSgpXG4gIH1cbn1cblxuY2xhc3MgQ29yc01pZGRsZXdhcmUgZXh0ZW5kcyBCYXNlTWlkZGxld2FyZSB7XG4gIHByb2Nlc3NSZXF1ZXN0KCkge1xuICAgIHRoaXMucmVzcG9uc2UuaGVhZGVycyh7XG4gICAgICAnQWNjZXNzLUNvbnRyb2wtQWxsb3ctT3JpZ2luJzogJyonLFxuICAgICAgJ0FjY2Vzcy1Db250cm9sLUFsbG93LUNyZWRlbnRpYWxzJzogdHJ1ZVxuICAgIH0pXG4gICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSgpXG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQge1xuICBMYW5ndWFnZU1pZGRsZXdhcmUsXG4gIENvcnNNaWRkbGV3YXJlXG59XG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vaGVscGVycy9NaWRkbGV3YXJlLmpzIiwibW9kdWxlLmV4cG9ydHMgPSByZXF1aXJlKFwiaTE4blwiKTtcblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyBleHRlcm5hbCBcImkxOG5cIlxuLy8gbW9kdWxlIGlkID0gMTJcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiaW1wb3J0IFN3YXBpIGZyb20gJy4vc3dhcGknXG5cbmV4cG9ydCB7XG4gIFN3YXBpXG59XG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vdXRpbHMvaW5kZXguanMiLCJjb25zdCBmZXRjaCA9IHJlcXVpcmUoJ25vZGUtZmV0Y2gnKTtcblxuY29uc3Qgc3dhcGlNb2R1bGUgPSAoZnVuY3Rpb24gKCkge1xuICB2YXIgcm9vdFVSTCA9IFwiaHR0cHM6Ly9zd2FwaS5weTRlLmNvbS9hcGkvXCI7XG5cbiAgZnVuY3Rpb24gcmVxdWVzdCh1cmwsIGNiKSB7XG4gICAgcmV0dXJuIGZldGNoKHVybClcbiAgICAgIC50aGVuKGZ1bmN0aW9uIChyZXMpIHtcbiAgICAgICAgcmV0dXJuIHJlcy5qc29uKCk7XG4gICAgICB9KVxuICAgICAgLnRoZW4oZnVuY3Rpb24gKGRhdGEpIHtcbiAgICAgICAgaWYgKHR5cGVvZiBjYiA9PT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICAgICAgY2IoZGF0YSk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gZGF0YTtcbiAgICAgIH0pXG4gICAgICAuY2F0Y2goZnVuY3Rpb24gKGVycikge1xuICAgICAgICBjb25zb2xlLmxvZyhlcnIpO1xuICAgICAgfSk7XG4gIH1cblxuICBmdW5jdGlvbiBnZXRSZXNvdXJjZXMoY2IpIHtcbiAgICByZXR1cm4gcmVxdWVzdChyb290VVJMLCBjYik7XG4gIH1cblxuICBmdW5jdGlvbiBzaW5ndWxhclJlcXVlc3RHZW5lcmF0b3IocGF0aCkge1xuICAgIHJldHVybiBmdW5jdGlvbiAoaWQsIGNiKSB7XG4gICAgICByZXR1cm4gcmVxdWVzdChyb290VVJMICsgcGF0aCArIFwiL1wiICsgaWQgKyBcIi9cIiwgY2IpO1xuICAgIH07XG4gIH1cblxuICBmdW5jdGlvbiBwbHVyYWxSZXF1ZXN0R2VuZXJhdG9yKHBhdGgpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKCkge1xuXG4gICAgICBsZXQgcXVlcnlPYmplY3QgPSB1bmRlZmluZWQ7XG4gICAgICBsZXQgY2IgPSB1bmRlZmluZWQ7XG5cbiAgICAgIGlmIChhcmd1bWVudHMubGVuZ3RoID4gMSkge1xuICAgICAgICBxdWVyeU9iamVjdCA9IGFyZ3VtZW50c1swXTtcbiAgICAgICAgY2IgPSBhcmd1bWVudHNbMV07XG4gICAgICB9IGVsc2UgaWYgKGFyZ3VtZW50c1swXSkge1xuICAgICAgICAvLyBJZiBnaXZlbiBleGFjdGx5IG9uZSBhcmd1bWVudFxuICAgICAgICBpZiAodHlwZW9mIGFyZ3VtZW50c1swXSA9PT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICAgICAgY2IgPSBhcmd1bWVudHNbMF07XG4gICAgICAgICAgcXVlcnlPYmplY3QgPSBudWxsO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGNiID0gbnVsbDtcbiAgICAgICAgICBxdWVyeU9iamVjdCA9IGFyZ3VtZW50c1swXTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBpZiAocXVlcnlPYmplY3QpIHtcbiAgICAgICAgbGV0IHNlYXJjaFBhcmFtcyA9IG5ldyBVUkxTZWFyY2hQYXJhbXMoKTtcbiAgICAgICAgZm9yIChsZXQga2V5IG9mIE9iamVjdC5rZXlzKHF1ZXJ5T2JqZWN0KSkge1xuICAgICAgICAgIGxldCB2YWx1ZSA9IHF1ZXJ5T2JqZWN0W2tleV07XG4gICAgICAgICAgc2VhcmNoUGFyYW1zLmFwcGVuZChrZXksIHZhbHVlKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcmVxdWVzdChyb290VVJMICsgcGF0aCArIFwiLz9cIiArIHNlYXJjaFBhcmFtcy50b1N0cmluZygpLCBjYik7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiByZXF1ZXN0KHJvb3RVUkwgKyBwYXRoICsgXCIvXCIsIGNiKTtcblxuICAgIH07XG4gIH1cblxuICByZXR1cm4ge1xuICAgIGdldFJlc291cmNlczogZ2V0UmVzb3VyY2VzLFxuICAgIGdldFBlcnNvbjogc2luZ3VsYXJSZXF1ZXN0R2VuZXJhdG9yKFwicGVvcGxlXCIpLFxuICAgIGdldFBlb3BsZTogcGx1cmFsUmVxdWVzdEdlbmVyYXRvcihcInBlb3BsZVwiKSxcbiAgICBnZXRGaWxtOiBzaW5ndWxhclJlcXVlc3RHZW5lcmF0b3IoXCJmaWxtc1wiKSxcbiAgICBnZXRGaWxtczogcGx1cmFsUmVxdWVzdEdlbmVyYXRvcihcImZpbG1zXCIpLFxuICAgIGdldFBsYW5ldDogc2luZ3VsYXJSZXF1ZXN0R2VuZXJhdG9yKFwicGxhbmV0c1wiKSxcbiAgICBnZXRQbGFuZXRzOiBwbHVyYWxSZXF1ZXN0R2VuZXJhdG9yKFwicGxhbmV0c1wiKSxcbiAgICBnZXRTcGVjaWVzOiBzaW5ndWxhclJlcXVlc3RHZW5lcmF0b3IoXCJzcGVjaWVzXCIpLFxuICAgIGdldEFsbFNwZWNpZXM6IHBsdXJhbFJlcXVlc3RHZW5lcmF0b3IoXCJzcGVjaWVzXCIpLFxuICAgIGdldFN0YXJzaGlwOiBzaW5ndWxhclJlcXVlc3RHZW5lcmF0b3IoXCJzdGFyc2hpcHNcIiksXG4gICAgZ2V0U3RhcnNoaXBzOiBwbHVyYWxSZXF1ZXN0R2VuZXJhdG9yKFwic3RhcnNoaXBzXCIpLFxuICAgIGdldFZlaGljbGU6IHNpbmd1bGFyUmVxdWVzdEdlbmVyYXRvcihcInZlaGljbGVzXCIpLFxuICAgIGdldFZlaGljbGVzOiBwbHVyYWxSZXF1ZXN0R2VuZXJhdG9yKFwidmVoaWNsZXNcIilcbiAgfTtcbn0pKClcblxuZXhwb3J0IGRlZmF1bHQgc3dhcGlNb2R1bGVcblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi91dGlscy9zd2FwaS5qcyIsIm1vZHVsZS5leHBvcnRzID0gcmVxdWlyZShcIm5vZGUtZmV0Y2hcIik7XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gZXh0ZXJuYWwgXCJub2RlLWZldGNoXCJcbi8vIG1vZHVsZSBpZCA9IDE1XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsImltcG9ydCBVbml0T2ZXb3JrIGZyb20gJy4vVW5pdE9mV29yaydcbmltcG9ydCBEQkNvbnRleHQgZnJvbSAnLi9EQkNvbnRleHQnXG5cbmNvbnN0IHVuaXRPZldvcmsgPSBuZXcgVW5pdE9mV29yayhEQkNvbnRleHQpXG5cbmV4cG9ydCB7XG4gIHVuaXRPZldvcmtcbn1cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9wZXJzaXN0ZW5jZS9pbmRleC5qcyIsImltcG9ydCB7IEZpbG1SZXBvc2l0b3J5IH0gZnJvbSAnc3dhcGktcmVwb3NpdG9yaWVzJ1xuXG5jbGFzcyBVbml0T2ZXb3JrIHtcbiAgY29uc3RydWN0b3IoZGJDb250ZXh0KSB7XG4gICAgdGhpcy5kYkNvbnRleHQgPSBkYkNvbnRleHRcblxuICAgIHRoaXMuRmlsbSA9IG5ldyBGaWxtUmVwb3NpdG9yeShkYkNvbnRleHQpXG4gIH1cblxufVxuXG5leHBvcnQgZGVmYXVsdCBVbml0T2ZXb3JrIFxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL3BlcnNpc3RlbmNlL1VuaXRPZldvcmsuanMiLCJpbXBvcnQgRmlsbVJlcG9zaXRvcnkgZnJvbSAnLi9GaWxtJ1xuXG5leHBvcnQge1xuICBGaWxtUmVwb3NpdG9yeVxufVxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL3JlcG9zaXRvcmllcy9pbmRleC5qcyIsImltcG9ydCBJUmVwb3NpdG9yeSBmcm9tICcuL0lSZXBvc2l0b3J5J1xuXG5jbGFzcyBGaWxtUmVwb3NpdG9yeSBleHRlbmRzIElSZXBvc2l0b3J5IHtcbiAgY29uc3RydWN0b3IoZGJDb250ZXh0KSB7XG4gICAgc3VwZXIoKVxuXG4gICAgdGhpcy5kYkNvbnRleHQgPSBkYkNvbnRleHRcblxuICAgIHJldHVybiB0aGlzXG4gIH1cblxuICBhc3luYyBjcmVhdGUoZmlsbSkge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCB7IEZpbG0gfSA9IHRoaXMuZGJDb250ZXh0XG4gICAgICBjb25zdCBmaWxtU2F2ZWQgPSBhd2FpdCBGaWxtLmNyZWF0ZShmaWxtKVxuXG4gICAgICByZXR1cm4gZmlsbVNhdmVkXG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgY29uc29sZS5sb2coZSlcbiAgICB9XG4gIH1cblxuICBhc3luYyB1cGRhdGUoaWQsIGZpbG0pIHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgeyBGaWxtIH0gPSB0aGlzLmRiQ29udGV4dFxuICAgICAgY29uc3QgZmlsbVNhdmVkID0gYXdhaXQgRmlsbS51cGRhdGUoZmlsbSwgeyB3aGVyZTogeyBpZCB9IH0pXG5cbiAgICAgIHJldHVybiBmaWxtU2F2ZWRcbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICBjb25zb2xlLmxvZyhlKVxuICAgIH1cbiAgfVxuXG4gIGFzeW5jIGdldChmaWx0ZXJzKSB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHsgRmlsbSB9ID0gdGhpcy5kYkNvbnRleHRcbiAgICAgIGNvbnN0IGZpbG0gPSBhd2FpdCBGaWxtLmZpbmRBbGwoZmlsdGVycylcblxuICAgICAgcmV0dXJuIGZpbG1cbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICBjb25zb2xlLmxvZyhlKVxuICAgIH1cbiAgfVxuXG4gIGFzeW5jIGdldEJ5SWQoaWQpIHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgeyBGaWxtIH0gPSB0aGlzLmRiQ29udGV4dFxuICAgICAgY29uc3QgZmlsbSA9IGF3YWl0IEZpbG0uZmluZE9uZSh7IHdoZXJlOiB7IGlkIH0gfSlcblxuICAgICAgcmV0dXJuIGZpbG1cbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICBjb25zb2xlLmxvZyhlKVxuICAgIH1cbiAgfVxuXG4gIGFzeW5jIHJlbW92ZShpZCkge1xuICAgIGNvbnN0IHsgRmlsbSB9ID0gdGhpcy5kYkNvbnRleHRcbiAgICBjb25zdCBmaWxtID0gYXdhaXQgRmlsbS5maW5kT25lKHsgd2hlcmU6IHsgaWQgfSB9KVxuXG4gICAgYXdhaXQgRmlsbS5kZXN0cm95KHsgd2hlcmU6IHsgaWQgfSB9KVxuXG4gICAgcmV0dXJuIGZpbG1cbiAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBGaWxtUmVwb3NpdG9yeVxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL3JlcG9zaXRvcmllcy9GaWxtLmpzIiwiY2xhc3MgSVJlcG9zaXRvcnkge1xuICBjb25zdHJ1Y3RvcigpIHtcbiAgICBpZiAodGhpcy5jcmVhdGUgPT09IHVuZGVmaW5lZCkgdGhyb3cgbmV3IEVycm9yKCdNdXN0IG92ZXJyaWRlIC5jcmVhdGUoKSBtZXRob2QuJylcbiAgICBpZiAodGhpcy51cGRhdGUgPT09IHVuZGVmaW5lZCkgdGhyb3cgbmV3IEVycm9yKCdNdXN0IG92ZXJyaWRlIC51cGRhdGUoKSBtZXRob2QnKVxuICAgIGlmICh0aGlzLmdldCA9PT0gdW5kZWZpbmVkKSB0aHJvdyBuZXcgRXJyb3IoJ011c3Qgb3ZlcnJpZGUgLmdldCgpIG1ldG9kJylcbiAgICBpZiAodGhpcy5nZXRCeUlkID09PSB1bmRlZmluZWQpIHRocm93IG5ldyBFcnJvcignTXVzdCBvdmVycmlkZSAuZ2V0QnlJZCgpIG1ldGhvZCcpXG4gICAgaWYgKHRoaXMucmVtb3ZlID09PSB1bmRlZmluZWQpIHRocm93IG5ldyBFcnJvcignTXVzdCBvdmVycmlkZSAucmVtb3ZlKCkgbWV0aG9kJylcbiAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBJUmVwb3NpdG9yeVxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL3JlcG9zaXRvcmllcy9JUmVwb3NpdG9yeS5qcyIsImltcG9ydCBDb25uZWN0aW9uTWFuYWdlciBmcm9tICdzd2FwaS1kYXRhYmFzZSdcblxuY29uc3QgZW52ID0gcHJvY2Vzcy5lbnYuTk9ERV9FTlYgfHwgJ2RldmVsb3BtZW50JztcbmNvbnN0IGNvbmZpZyA9IHJlcXVpcmUoJy4uL2RhdGFiYXNlL2NvbmZpZy5qcycpW2Vudl07XG5cbmNvbnN0IGNuTWFuYWdlciA9IG5ldyBDb25uZWN0aW9uTWFuYWdlcihjb25maWcpXG5jb25zdCBkYiA9IGNuTWFuYWdlci5nZXRDb25uZWN0aW9uKClcblxuZXhwb3J0IGRlZmF1bHQgZGJcblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9wZXJzaXN0ZW5jZS9EQkNvbnRleHQuanMiLCIndXNlIHN0cmljdCc7XG5cbmNvbnN0IGZzID0gcmVxdWlyZSgnZnMnKTtcbmNvbnN0IHBhdGggPSByZXF1aXJlKCdwYXRoJyk7XG5jb25zdCBTZXF1ZWxpemUgPSByZXF1aXJlKCdzZXF1ZWxpemUnKTtcbmNvbnN0IGJhc2VuYW1lID0gcGF0aC5iYXNlbmFtZShfX2ZpbGVuYW1lKTtcbmNvbnN0IHsgRlJBTUVXT1JLIH0gPSByZXF1aXJlKCcuLi9jb25zdGFudHMnKVxuXG52YXIgX2luc3RhbmNlID0gbnVsbFxuY29uc3QgbW9kZWxzUGF0aCA9IHBhdGgucmVzb2x2ZShfX2Rpcm5hbWUsICcuL21vZGVscycpXG5cbmNsYXNzIENvbm5lY3Rpb25NYW5hZ2VyIHtcbiAgY29uc3RydWN0b3IoY29uZmlnID0ge30pIHtcbiAgICB0aGlzLmZyYW1ld29yayA9IGNvbmZpZy5mcmFtZXdvcmsgfHwgRlJBTUVXT1JLLlNFUVVFTElaRVxuICAgIHRoaXMuZGF0YWJhc2UgPSBjb25maWcuZGF0YWJhc2VcbiAgICB0aGlzLnVzZXJuYW1lID0gY29uZmlnLnVzZXJuYW1lXG4gICAgdGhpcy5wYXNzd29yZCA9IGNvbmZpZy5wYXNzd29yZFxuICAgIHRoaXMuaG9zdCA9IGNvbmZpZy5ob3N0XG4gICAgdGhpcy5wb3J0ID0gY29uZmlnLnBvcnRcbiAgICB0aGlzLmRpYWxlY3QgPSBjb25maWcuZGlhbGVjdFxuICAgIHRoaXMuc2VxdWVsaXplID0ge31cbiAgICB0aGlzLmRpcmVjdG9yeSA9IGNvbmZpZy5kaXJlY3RvcnkgfHwgbW9kZWxzUGF0aFxuICAgIHRoaXMudXNlX2Vudl92YXJpYWJsZSA9IGNvbmZpZy51c2VfZW52X3ZhcmlhYmxlXG5cbiAgICB0aGlzLmNvbm5lY3Rpb24gPSBudWxsXG5cbiAgICBpZiAoIV9pbnN0YW5jZSkge1xuICAgICAgX2luc3RhbmNlID0gdGhpc1xuICAgIH1cbiAgICByZXR1cm4gX2luc3RhbmNlXG4gIH1cblxuICBnZXRDb25uZWN0aW9uKCkge1xuICAgIHN3aXRjaCAodGhpcy5mcmFtZXdvcmspIHtcbiAgICAgIGNhc2UgRlJBTUVXT1JLLlNFUVVFTElaRTpcbiAgICAgICAgdGhpcy5jb25uZWN0aW9uID0gdGhpcy5jb25uZWN0aW9uIHx8IHRoaXMuZ2V0U2VxdWVsaXplKClcbiAgICAgICAgYnJlYWtcbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIHRoaXMuY29ubmVjdGlvbiA9IHRoaXMuY29ubmVjdGlvbiB8fCB0aGlzLmdldFNlcXVlbGl6ZSgpXG4gICAgICAgIGJyZWFrXG4gICAgfVxuXG4gICAgcmV0dXJuIHRoaXMuY29ubmVjdGlvblxuICB9XG5cbiAgZ2V0U2VxdWVsaXplKCkge1xuICAgIGNvbnN0IGRiID0ge307XG5cbiAgICBjb25zdCB7IGRhdGFiYXNlLCB1c2VybmFtZSwgcGFzc3dvcmQsIGRpcmVjdG9yeSwgaG9zdCwgcG9ydCwgZGlhbGVjdCwgdXNlX2Vudl92YXJpYWJsZSB9ID0gdGhpc1xuICAgIGNvbnN0IGNvbmZpZyA9IHsgZGF0YWJhc2UsIHVzZXJuYW1lLCBwYXNzd29yZCwgaG9zdCwgcG9ydCwgZGlhbGVjdCB9XG5cbiAgICB0cnkge1xuICAgICAgaWYgKHVzZV9lbnZfdmFyaWFibGUpIHtcbiAgICAgICAgdGhpcy5zZXF1ZWxpemUgPSBuZXcgU2VxdWVsaXplKHByb2Nlc3MuZW52W3VzZV9lbnZfdmFyaWFibGVdLCBjb25maWcpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5zZXF1ZWxpemUgPSBuZXcgU2VxdWVsaXplKGRhdGFiYXNlLCB1c2VybmFtZSwgcGFzc3dvcmQsIGNvbmZpZyk7XG4gICAgICB9XG5cbiAgICAgIGZzXG4gICAgICAgIC5yZWFkZGlyU3luYyhkaXJlY3RvcnkpXG4gICAgICAgIC5maWx0ZXIoZmlsZSA9PiB7XG4gICAgICAgICAgcmV0dXJuIChmaWxlLmluZGV4T2YoJy4nKSAhPT0gMCkgJiYgKGZpbGUgIT09IGJhc2VuYW1lKSAmJiAoZmlsZS5zbGljZSgtMykgPT09ICcuanMnKTtcbiAgICAgICAgfSlcbiAgICAgICAgLmZvckVhY2goZmlsZSA9PiB7XG4gICAgICAgICAgY29uc3QgbW9kZWwgPSB0aGlzLnNlcXVlbGl6ZVsnaW1wb3J0J10ocGF0aC5qb2luKGRpcmVjdG9yeSwgZmlsZSkpO1xuICAgICAgICAgIGRiW21vZGVsLm5hbWVdID0gbW9kZWw7XG4gICAgICAgIH0pO1xuXG4gICAgICBPYmplY3Qua2V5cyhkYikuZm9yRWFjaChtb2RlbE5hbWUgPT4ge1xuICAgICAgICBpZiAoZGJbbW9kZWxOYW1lXS5hc3NvY2lhdGUpIHtcbiAgICAgICAgICBkYlttb2RlbE5hbWVdLmFzc29jaWF0ZShkYik7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuXG4gICAgICBkYi5zZXF1ZWxpemUgPSB0aGlzLnNlcXVlbGl6ZTtcbiAgICAgIGRiLlNlcXVlbGl6ZSA9IFNlcXVlbGl6ZTtcbiAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgIGRiLnN0YWNrdHJhY2UgPSBlcnJcbiAgICAgIGRiLm1lc3NhZ2UgPSAnQ29ubmVjdGlvbk1hbmFnZXJFcnJvciBpbiBnZXRTZXF1ZWxpemVDb25uZWN0aW9uJ1xuXG4gICAgICBjb25zb2xlLmVycm9yKGVycilcbiAgICB9XG5cbiAgICByZXR1cm4gZGJcbiAgfVxufVxuXG5tb2R1bGUuZXhwb3J0cyA9IENvbm5lY3Rpb25NYW5hZ2VyXG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9kYXRhYmFzZS9pbmRleC5qcyIsIm1vZHVsZS5leHBvcnRzID0gcmVxdWlyZShcImZzXCIpO1xuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIGV4dGVybmFsIFwiZnNcIlxuLy8gbW9kdWxlIGlkID0gMjNcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwibW9kdWxlLmV4cG9ydHMgPSByZXF1aXJlKFwic2VxdWVsaXplXCIpO1xuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIGV4dGVybmFsIFwic2VxdWVsaXplXCJcbi8vIG1vZHVsZSBpZCA9IDI0XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsImNvbnN0IEZSQU1FV09SSyA9IHtcbiAgU0VRVUVMSVpFOiAnc2VxdWVsaXplJ1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IHtcbiAgRlJBTUVXT1JLXG59XG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vY29uc3RhbnRzL2luZGV4LmpzIiwiY29uc3QgeWVudiA9IHJlcXVpcmUoJ3llbnYnKVxuY29uc3QgZW52ID0gcHJvY2Vzcy5lbnYuTk9ERV9FTlYgfHwgJ2RldmVsb3BtZW50J1xuY29uc3Qgc3RhZ2UgPSB5ZW52KCcuZW52LnltbCcsIHsgZW52IH0pXG5cbm1vZHVsZS5leHBvcnRzID0ge1xuICBkZXZlbG9wbWVudDoge1xuICAgIHVzZXJuYW1lOiBzdGFnZS5EQl9VU0VSTkFNRSxcbiAgICBwYXNzd29yZDogc3RhZ2UuREJfUEFTU1dPUkQsXG4gICAgZGF0YWJhc2U6IHN0YWdlLkRCX0RBVEFCQVNFLFxuICAgIGhvc3Q6IHN0YWdlLkRCX0hPU1QsXG4gICAgZGlhbGVjdDogc3RhZ2UuREJfRElBTEVDVFxuICB9LFxuICB0ZXN0OiB7XG4gICAgdXNlcm5hbWU6IHN0YWdlLkRCX1VTRVJOQU1FLFxuICAgIHBhc3N3b3JkOiBzdGFnZS5EQl9QQVNTV09SRCxcbiAgICBkYXRhYmFzZTogc3RhZ2UuREJfREFUQUJBU0UsXG4gICAgaG9zdDogc3RhZ2UuREJfSE9TVCxcbiAgICBkaWFsZWN0OiBzdGFnZS5EQl9ESUFMRUNUXG4gIH0sXG4gIHByb2R1Y3Rpb246IHtcbiAgICB1c2VybmFtZTogc3RhZ2UuREJfVVNFUk5BTUUsXG4gICAgcGFzc3dvcmQ6IHN0YWdlLkRCX1BBU1NXT1JELFxuICAgIGRhdGFiYXNlOiBzdGFnZS5EQl9EQVRBQkFTRSxcbiAgICBob3N0OiBzdGFnZS5EQl9IT1NULFxuICAgIGRpYWxlY3Q6IHN0YWdlLkRCX0RJQUxFQ1RcbiAgfVxufVxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL2RhdGFiYXNlL2NvbmZpZy5qcyIsIm1vZHVsZS5leHBvcnRzID0gcmVxdWlyZShcInllbnZcIik7XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gZXh0ZXJuYWwgXCJ5ZW52XCJcbi8vIG1vZHVsZSBpZCA9IDI3XG4vLyBtb2R1bGUgY2h1bmtzID0gMCJdLCJzb3VyY2VSb290IjoiIn0=